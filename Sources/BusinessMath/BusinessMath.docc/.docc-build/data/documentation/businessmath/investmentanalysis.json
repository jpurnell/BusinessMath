{"sections":[],"schemaVersion":{"major":0,"minor":3,"patch":0},"identifier":{"url":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/InvestmentAnalysis","interfaceLanguage":"swift"},"seeAlsoSections":[{"title":"Related Documentation","identifiers":["doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/TimeValueOfMoney","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/LoanAmortization","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/BuildingRevenueModel"],"anchor":"Related-Documentation"},{"title":"Tutorials","generated":true,"identifiers":["doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/BuildingRevenueModel","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/FinancialStatementsGuide","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/BuildingFinancialReports","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/ScenarioAnalysisGuide","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/FinancialRatiosGuide","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/VisualizationGuide","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/DebtAndFinancingGuide","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/EquityFinancingGuide","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/LeaseAccountingGuide","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/LoanAmortization","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/OptimizationGuide","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/ForecastingGuide","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/PortfolioOptimizationGuide","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/RealOptionsGuide","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/RiskAnalyticsGuide"],"anchor":"Tutorials"}],"hierarchy":{"paths":[["doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath"]]},"abstract":[{"type":"text","text":"Evaluate investment opportunities using NPV, IRR, and other financial metrics."}],"metadata":{"roleHeading":"Article","title":"Investment Analysis","role":"article"},"kind":"article","primaryContentSections":[{"content":[{"type":"heading","level":2,"text":"Overview","anchor":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This tutorial demonstrates how to perform comprehensive investment analysis using BusinessMath. You’ll learn how to:"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Calculate Net Present Value (NPV)","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Determine Internal Rate of Return (IRR)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Use XNPV and XIRR for irregular cash flows"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Calculate profitability index and payback periods"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Compare multiple investment opportunities"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Make data-driven investment decisions"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Time estimate:"}],"type":"strong"},{"type":"text","text":" 30-40 minutes"}]},{"type":"heading","level":2,"text":"Prerequisites","anchor":"Prerequisites"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Basic understanding of Swift"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Familiarity with investment concepts (cash flows, discount rates)"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Understanding of time value of money (see "},{"identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/TimeValueOfMoney","type":"reference","isActive":true},{"type":"text","text":")"}],"type":"paragraph"}]}]},{"type":"heading","text":"Step 1: Define the Investment","level":2,"anchor":"Step-1-Define-the-Investment"},{"inlineContent":[{"type":"text","text":"Let’s analyze a real estate investment opportunity."}],"type":"paragraph"},{"code":["import BusinessMath","import Foundation","","\/\/ Investment opportunity: Rental property","let propertyPrice = 250_000.0","let downPayment = 50_000.0      \/\/ 20% down","let renovationCosts = 20_000.0","let initialInvestment = downPayment + renovationCosts  \/\/ Total: $70,000","","\/\/ Expected annual cash flows (after expenses and mortgage)","let year1 = 8_000.0","let year2 = 8_500.0","let year3 = 9_000.0","let year4 = 9_500.0","let year5 = 10_000.0","let salePrice = 300_000.0       \/\/ Expected sale price after 5 years","let mortgagePayoff = 190_000.0  \/\/ Remaining mortgage balance","let saleProceeds = salePrice - mortgagePayoff  \/\/ Net: $110,000","","print(\"Real Estate Investment Analysis\")","print(\"================================\")","print(\"Initial Investment: $\\(String(format: \"%.0f\", initialInvestment))\")","print(\"  Down Payment: $\\(String(format: \"%.0f\", downPayment))\")","print(\"  Renovations: $\\(String(format: \"%.0f\", renovationCosts))\")","print(\"\\nExpected Cash Flows:\")","print(\"  Year 1-5: Annual rental income\")","print(\"  Year 5: + Sale proceeds\")","print(\"  Required Return: 12% (target rate)\")"],"type":"codeListing","syntax":"swift"},{"type":"heading","text":"Step 2: Calculate NPV","level":2,"anchor":"Step-2-Calculate-NPV"},{"inlineContent":[{"type":"text","text":"Determine if the investment creates value at your required return."}],"type":"paragraph"},{"code":["\/\/ Define all cash flows (negative initial, then positive returns)","let cashFlows = [","    -initialInvestment,  \/\/ Year 0: Investment","    year1,               \/\/ Year 1: Rental income","    year2,               \/\/ Year 2: Rental income","    year3,               \/\/ Year 3: Rental income","    year4,               \/\/ Year 4: Rental income","    year5 + saleProceeds \/\/ Year 5: Rental income + sale","]","","\/\/ Calculate NPV at required return of 12%","let requiredReturn = 0.12","let npvValue = npv(discountRate: requiredReturn, cashFlows: cashFlows)","","print(\"\\nNet Present Value Analysis\")","print(\"===========================\")","print(\"Discount Rate: \\(String(format: \"%.0f%%\", requiredReturn * 100))\")","print(\"NPV: $\\(String(format: \"%.2f\", npvValue))\")","","if npvValue > 0 {","    print(\"✓ Positive NPV - Investment adds value\")","    print(\"  For every $1 invested, you create $\\(String(format: \"%.2f\", 1 + npvValue \/ initialInvestment)) of value\")","} else if npvValue < 0 {","    print(\"✗ Negative NPV - Investment destroys value\")","    print(\"  Should reject this opportunity\")","} else {","    print(\"○ Zero NPV - Breakeven investment\")","    print(\"  Exactly meets required return\")","}"],"type":"codeListing","syntax":"swift"},{"inlineContent":[{"inlineContent":[{"type":"text","text":"Expected output:"}],"type":"strong"}],"type":"paragraph"},{"code":["Net Present Value Analysis","===========================","Discount Rate: 12%","NPV: $26,943.09","✓ Positive NPV - Investment adds value","  For every $1 invested, you create $1.38 of value"],"type":"codeListing","syntax":null},{"type":"heading","text":"Step 3: Calculate IRR","level":2,"anchor":"Step-3-Calculate-IRR"},{"inlineContent":[{"type":"text","text":"Find the actual return rate of the investment."}],"type":"paragraph"},{"code":["\/\/ Calculate Internal Rate of Return","let irrValue = try irr(cashFlows: cashFlows)","","print(\"\\nInternal Rate of Return\")","print(\"=======================\")","print(\"IRR: \\(String(format: \"%.2f%%\", irrValue * 100))\")","print(\"Required Return: \\(String(format: \"%.2f%%\", requiredReturn * 100))\")","","if irrValue > requiredReturn {","    let spread = (irrValue - requiredReturn) * 100","    print(\"✓ IRR exceeds required return by \\(String(format: \"%.2f\", spread)) percentage points\")","    print(\"  Investment is attractive\")","} else if irrValue < requiredReturn {","    let shortfall = (requiredReturn - irrValue) * 100","    print(\"✗ IRR falls short by \\(String(format: \"%.2f\", shortfall)) percentage points\")","    print(\"  Investment should be rejected\")","} else {","    print(\"○ IRR equals required return\")","    print(\"  Investment is at breakeven\")","}","","\/\/ Verify: NPV at IRR should be ~0","let npvAtIRR = npv(discountRate: irrValue, cashFlows: cashFlows)","print(\"\\nVerification: NPV at IRR = $\\(String(format: \"%.2f\", npvAtIRR)) (should be ~$0)\")"],"type":"codeListing","syntax":"swift"},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Expected output:","type":"text"}]}],"type":"paragraph"},{"code":["Internal Rate of Return","=======================","IRR: 22.83%","Required Return: 12.00%","✓ IRR exceeds required return by 10.83 percentage points","  Investment is attractive","","Verification: NPV at IRR = $0.00 (should be ~$0)"],"type":"codeListing","syntax":null},{"type":"heading","text":"Step 4: Calculate Additional Metrics","level":2,"anchor":"Step-4-Calculate-Additional-Metrics"},{"inlineContent":[{"type":"text","text":"Use supporting metrics for a complete picture."}],"type":"paragraph"},{"code":["\/\/ Profitability Index","let pi = profitabilityIndex(rate: requiredReturn, cashFlows: cashFlows)","","print(\"\\nProfitability Index\")","print(\"===================\")","print(\"PI: \\(String(format: \"%.2f\", pi))\")","if pi > 1.0 {","    print(\"✓ PI > 1.0 - Creates value\")","    print(\"  Returns $\\(String(format: \"%.2f\", pi)) for every $1 invested (at \\(String(format: \"%.0f%%\", requiredReturn * 100)))\")","} else if pi < 1.0 {","    print(\"✗ PI < 1.0 - Destroys value\")","} else {","    print(\"○ PI = 1.0 - Breakeven\")","}","","\/\/ Payback Period (simple)","let payback = paybackPeriod(cashFlows: cashFlows)","","print(\"\\nPayback Period\")","print(\"==============\")","if let pb = payback {","    print(\"Simple Payback: \\(pb) years\")","    print(\"  Investment recovered in year \\(pb)\")","} else {","    print(\"Investment never recovers initial outlay\")","}","","\/\/ Discounted Payback Period","let discountedPayback = discountedPaybackPeriod(rate: requiredReturn, cashFlows: cashFlows)","","if let dpb = discountedPayback {","    print(\"Discounted Payback: \\(dpb) years (at \\(String(format: \"%.0f%%\", requiredReturn * 100)))\")","    if let pb = payback {","        let difference = dpb - pb","        print(\"  Takes \\(difference) more year(s) when accounting for time value\")","    }","} else {","    print(\"Investment never recovers on discounted basis\")","}"],"type":"codeListing","syntax":"swift"},{"inlineContent":[{"inlineContent":[{"text":"Expected output:","type":"text"}],"type":"strong"}],"type":"paragraph"},{"code":["Profitability Index","===================","PI: 1.38","✓ PI > 1.0 - Creates value","  Returns $1.38 for every $1 invested (at 12%)","","Payback Period","==============","Simple Payback: 5 years","  Investment recovered in year 5","","Discounted Payback: 5 years (at 12%)","  Takes 0 more year(s) when accounting for time value"],"syntax":null,"type":"codeListing"},{"text":"Step 5: Sensitivity Analysis","level":2,"anchor":"Step-5-Sensitivity-Analysis","type":"heading"},{"inlineContent":[{"type":"text","text":"Test how changes in assumptions affect the decision."}],"type":"paragraph"},{"code":["print(\"\\n\\nSensitivity Analysis\")","print(\"====================\")","","\/\/ Test different discount rates","let rates = [0.08, 0.10, 0.12, 0.14, 0.16]","","print(\"NPV at Different Discount Rates:\")","print(\"Rate  | NPV        | Decision\")","print(\"------|------------|----------\")","","for rate in rates {","    let npv = npv(discountRate: rate, cashFlows: cashFlows)","    let decision = npv > 0 ? \"Accept\" : \"Reject\"","\tprint(String(format: \"%4.1f%% | $%9.2f | %@\", (rate * 100), npv, decision))","}","","\/\/ Test different sale prices","print(\"\\nNPV at Different Sale Prices:\")","print(\"Sale Price | Net Proceeds | NPV        | Decision\")","print(\"-----------|--------------|------------|----------\")","","let salePrices = [260_000.0, 280_000.0, 300_000.0, 320_000.0, 340_000.0]","","for price in salePrices {","    let proceeds = price - mortgagePayoff","    let flows = [","        -initialInvestment,","        year1, year2, year3, year4,","        year5 + proceeds","    ]","    let npv = npv(discountRate: requiredReturn, cashFlows: flows)","    let decision = npv > 0 ? \"Accept\" : \"Reject\"","\tprint(String(format: \"  $%7.0f | $%11.0f | $%9.2f | %@\",","\t\t\t price, proceeds, npv, decision))","}","","\/\/ Find breakeven sale price (where NPV = 0)","print(\"\\nBreakeven Analysis:\")","","var low = 200_000.0","var high = 350_000.0","var breakeven = (low + high) \/ 2","","\/\/ Binary search for breakeven","for _ in 0..<20 {","    let proceeds = breakeven - mortgagePayoff","    let flows = [-initialInvestment, year1, year2, year3, year4, year5 + proceeds]","    let npv = npv(discountRate: requiredReturn, cashFlows: flows)","","    if abs(npv) < 1.0 {","        break  \/\/ Close enough","    } else if npv > 0 {","        high = breakeven","    } else {","        low = breakeven","    }","    breakeven = (low + high) \/ 2","}","","print(\"Breakeven Sale Price: $\\(String(format: \"%.0f\", breakeven))\")","print(\"  At this price, NPV = $0 and IRR = \\(String(format: \"%.0f%%\", requiredReturn * 100))\")","print(\"  Current assumption: $\\(String(format: \"%.0f\", salePrice))\")","print(\"  Safety margin: $\\(String(format: \"%.0f\", salePrice - breakeven))\")"],"syntax":"swift","type":"codeListing"},{"text":"Step 6: Compare Multiple Investments","level":2,"anchor":"Step-6-Compare-Multiple-Investments","type":"heading"},{"inlineContent":[{"type":"text","text":"Evaluate and rank several opportunities."}],"type":"paragraph"},{"code":["print(\"\\n\\nComparing Investment Opportunities\")","print(\"===================================\")","","\/\/ Define three investment opportunities","struct Investment {","    let name: String","    let cashFlows: [Double]","    let description: String","}","","let investments = [","    Investment(","        name: \"Real Estate\",","        cashFlows: [-70_000, 8_000, 8_500, 9_000, 9_500, 120_000],","        description: \"Rental property with 5-year hold\"","    ),","    Investment(","        name: \"Stock Portfolio\",","        cashFlows: [-70_000, 5_000, 5_500, 6_000, 6_500, 75_000],","        description: \"Diversified equity portfolio\"","    ),","    Investment(","        name: \"Business Expansion\",","        cashFlows: [-70_000, 0, 10_000, 15_000, 20_000, 40_000],","        description: \"Expand product line (delayed returns)\"","    )","]","","\/\/ Calculate metrics for each","print(\"Investment      | NPV       | IRR     | PI   | Payback | Ranking\")","print(\"----------------|-----------|---------|------|---------|--------\")","","var results: [(name: String, npv: Double, irr: Double, pi: Double)] = []","","for investment in investments {","    let npv = npv(discountRate: requiredReturn, cashFlows: investment.cashFlows)","    let irr = try irr(cashFlows: investment.cashFlows)","    let pi = profitabilityIndex(rate: requiredReturn, cashFlows: investment.cashFlows)","    let payback = paybackPeriod(cashFlows: investment.cashFlows) ?? 99","","    results.append((investment.name, npv, irr, pi))","","    print(String(format: \"%@ | $%8.0f | %6.2f%% | %.2f | %d years | \",","                 investment.name, npv, irr * 100, pi, payback))","}","","\/\/ Rank by NPV (best decision criterion for value creation)","let ranked = results.sorted { $0.npv > $1.npv }","","print(\"\\nRanking by NPV (Value Creation):\")","for (i, result) in ranked.enumerated() {","    print(\"  \\(i + 1). \\(result.name): NPV = $\\(String(format: \"%.0f\", result.npv))\")","}","","print(\"\\nRecommendation:\")","print(\"  Choose '\\(ranked[0].name)' - Highest NPV\")","print(\"  Creates $\\(String(format: \"%.0f\", ranked[0].npv)) of value at \\(String(format: \"%.0f%%\", requiredReturn * 100)) required return\")"],"syntax":"swift","type":"codeListing"},{"text":"Step 7: Irregular Cash Flow Analysis","level":2,"anchor":"Step-7-Irregular-Cash-Flow-Analysis","type":"heading"},{"inlineContent":[{"type":"text","text":"Use XNPV and XIRR for real-world irregular timing."}],"type":"paragraph"},{"code":["print(\"\\n\\nIrregular Cash Flow Analysis\")","print(\"============================\")","","\/\/ Real investment with irregular timing","let startDate = Date()","let dates = [","    startDate,                                          \/\/ Today: Initial investment","    startDate.addingTimeInterval(90 * 86400),          \/\/ 90 days: First return","    startDate.addingTimeInterval(250 * 86400),         \/\/ 250 days: Second return","    startDate.addingTimeInterval(400 * 86400),         \/\/ 400 days: Third return","    startDate.addingTimeInterval(600 * 86400),         \/\/ 600 days: Fourth return","    startDate.addingTimeInterval(5 * 365 * 86400)      \/\/ 5 years: Exit","]","","let irregularCashFlows = [-70_000.0, 8_000, 8_500, 9_000, 9_500, 120_000]","","\/\/ Calculate XNPV","let xnpvValue = try xnpv(rate: requiredReturn, dates: dates, cashFlows: irregularCashFlows)","","print(\"Using XNPV for Irregular Timing:\")","print(\"  XNPV: $\\(String(format: \"%.2f\", xnpvValue))\")","","\/\/ Calculate XIRR","let xirrValue = try xirr(dates: dates, cashFlows: irregularCashFlows)","","print(\"  XIRR: \\(String(format: \"%.2f%%\", xirrValue * 100))\")","","\/\/ Compare to regular IRR","let regularIRR = try irr(cashFlows: irregularCashFlows)","","print(\"\\nComparison:\")","print(\"  Regular IRR (assumes annual periods): \\(String(format: \"%.2f%%\", regularIRR * 100))\")","print(\"  XIRR (actual dates): \\(String(format: \"%.2f%%\", xirrValue * 100))\")","print(\"  Difference: \\(String(format: \"%.2f\", (xirrValue - regularIRR) * 100)) percentage points\")","","\/\/ Verify XNPV at XIRR is ~0","let xnpvAtXIRR = try xnpv(rate: xirrValue, dates: dates, cashFlows: irregularCashFlows)","print(\"\\nVerification: XNPV at XIRR = $\\(String(format: \"%.2f\", xnpvAtXIRR))\")"],"syntax":"swift","type":"codeListing"},{"text":"Step 8: Risk-Adjusted Analysis","level":2,"anchor":"Step-8-Risk-Adjusted-Analysis","type":"heading"},{"inlineContent":[{"type":"text","text":"Account for risk in your evaluation."}],"type":"paragraph"},{"code":["print(\"\\n\\nRisk-Adjusted Analysis\")","print(\"======================\")","","\/\/ Define risk-adjusted discount rates","let riskFreeRate = 0.03      \/\/ Treasury rate","let marketReturn = 0.10      \/\/ Stock market average","let beta = 1.5               \/\/ Investment risk relative to market","","\/\/ Calculate risk-adjusted rate using CAPM","let riskAdjustedRate = riskFreeRate + beta * (marketReturn - riskFreeRate)","","print(\"Capital Asset Pricing Model (CAPM):\")","print(\"  Risk-free rate: \\(String(format: \"%.1f%%\", riskFreeRate * 100))\")","print(\"  Market return: \\(String(format: \"%.1f%%\", marketReturn * 100))\")","print(\"  Beta (risk): \\(String(format: \"%.1f\", beta))\")","print(\"  Risk-adjusted rate: \\(String(format: \"%.1f%%\", riskAdjustedRate * 100))\")","","\/\/ Recalculate NPV with risk-adjusted rate","let riskAdjustedNPV = npv(discountRate: riskAdjustedRate, cashFlows: cashFlows)","","print(\"\\nRisk-Adjusted NPV:\")","print(\"  Original NPV (12% rate): $\\(String(format: \"%.2f\", npvValue))\")","print(\"  Risk-adjusted NPV (\\(String(format: \"%.1f%%\", riskAdjustedRate * 100)) rate): $\\(String(format: \"%.2f\", riskAdjustedNPV))\")","","if riskAdjustedNPV > 0 {","    print(\"  ✓ Still positive after risk adjustment\")","} else {","    print(\"  ✗ Negative after accounting for risk\")","}","","\/\/ Scenario planning with probabilities","print(\"\\nScenario Analysis:\")","print(\"Scenario    | Probability | Sale Price | NPV        | Expected Value\")","print(\"------------|-------------|------------|------------|---------------\")","","let scenarios = [","    (name: \"Pessimistic\", prob: 0.25, price: 260_000.0),","    (name: \"Base Case  \", prob: 0.50, price: 300_000.0),","    (name: \"Optimistic \", prob: 0.25, price: 340_000.0)","]","","var expectedNPV = 0.0","","for scenario in scenarios {","    let proceeds = scenario.price - mortgagePayoff","    let flows = [-initialInvestment, year1, year2, year3, year4, year5 + proceeds]","    let scenarioNPV = npv(discountRate: requiredReturn, cashFlows: flows)","    let expectedValue = scenarioNPV * scenario.prob","","    expectedNPV += expectedValue","","    print(String(format: \"%-11@ | %10.0f%% | $%9.0f | $%9.2f | $%9.2f\",","                 scenario.name, scenario.prob * 100, scenario.price, scenarioNPV, expectedValue))","}","","print(String(format: \"%-11@ | %10s  | %10s | %10s | $%9.2f\",","             \"Expected\", \"\", \"\", \"\", expectedNPV))","","print(\"\\nExpected NPV: $\\(String(format: \"%.2f\", expectedNPV))\")","if expectedNPV > 0 {","    print(\"✓ Positive expected value across scenarios\")","} else {","    print(\"✗ Negative expected value\")","}"],"syntax":"swift","type":"codeListing"},{"text":"Step 9: Create Investment Decision Framework","level":2,"anchor":"Step-9-Create-Investment-Decision-Framework","type":"heading"},{"inlineContent":[{"type":"text","text":"Build a reusable decision framework."}],"type":"paragraph"},{"code":["struct InvestmentAnalysis {","    let name: String","    let initialInvestment: Double","    let cashFlows: [Double]","    let requiredReturn: Double","","    var npv: Double {","        BusinessMath.npv(discountRate: requiredReturn, cashFlows: cashFlows)","    }","","    var irr: Double {","        try! BusinessMath.irr(cashFlows: cashFlows)","    }","","    var profitabilityIndex: Double {","        BusinessMath.profitabilityIndex(rate: requiredReturn, cashFlows: cashFlows)","    }","","    var paybackPeriod: Int? {","        BusinessMath.paybackPeriod(cashFlows: cashFlows)","    }","","    var shouldAccept: Bool {","        npv > 0 && irr > requiredReturn && profitabilityIndex > 1.0","    }","","    func printReport() {","        print(\"\\nInvestment Analysis: \\(name)\")","        print(String(repeating: \"=\", count: 40))","        print(\"Initial Investment: $\\(String(format: \"%.0f\", -cashFlows[0]))\")","        print(\"Required Return: \\(String(format: \"%.1f%%\", requiredReturn * 100))\")","        print(\"\\nMetrics:\")","        print(\"  NPV: $\\(String(format: \"%.2f\", npv))\")","        print(\"  IRR: \\(String(format: \"%.2f%%\", irr * 100))\")","        print(\"  PI: \\(String(format: \"%.2f\", profitabilityIndex))\")","        if let pb = paybackPeriod {","            print(\"  Payback: \\(pb) years\")","        }","","        print(\"\\nDecision: \\(shouldAccept ? \"✓ ACCEPT\" : \"✗ REJECT\")\")","","        if shouldAccept {","            print(\"  All metrics indicate value creation\")","        } else {","            if npv <= 0 { print(\"  NPV is not positive\") }","            if irr <= requiredReturn { print(\"  IRR below required return\") }","            if profitabilityIndex <= 1.0 { print(\"  PI below 1.0\") }","        }","    }","}","","\/\/ Use the framework","let analysis = InvestmentAnalysis(","    name: \"Rental Property Investment\",","    initialInvestment: initialInvestment,","    cashFlows: cashFlows,","    requiredReturn: requiredReturn",")","","analysis.printReport()"],"syntax":"swift","type":"codeListing"},{"text":"Key Decision Rules","level":2,"anchor":"Key-Decision-Rules","type":"heading"},{"inlineContent":[{"text":"Use these rules for investment decisions:","type":"text"}],"type":"paragraph"},{"text":"Primary Rule: NPV","level":3,"anchor":"Primary-Rule-NPV","type":"heading"},{"items":[{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"NPV > 0"}],"type":"strong"},{"text":": Accept (creates value)","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"NPV < 0","type":"text"}],"type":"strong"},{"type":"text","text":": Reject (destroys value)"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"NPV = 0"}]},{"text":": Indifferent (breakeven)","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"heading","text":"Supporting Rules:","level":3,"anchor":"Supporting-Rules"},{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"IRR:"}],"type":"strong"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"IRR > Required Return: Accept","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"IRR < Required Return: Reject","type":"text"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Profitability Index:"}]}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"PI > 1.0: Accept","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"PI < 1.0: Reject","type":"text"}]}]}]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"When Choosing Among Projects:","type":"text"}],"type":"strong"}]},{"type":"orderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Choose highest NPV (maximizes value)"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Consider capital constraints (use PI for ranking)","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Account for risk differences (adjust discount rates)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Check liquidity needs (use payback periods)"}]}]}]},{"level":2,"text":"Key Takeaways","anchor":"Key-Takeaways","type":"heading"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"NPV is the gold standard"}]},{"type":"text","text":": Always use NPV for investment decisions"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"IRR supports but doesn’t replace NPV","type":"text"}],"type":"strong"},{"text":": Use IRR to communicate returns","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Irregular cash flows need XIRR\/XNPV"}]},{"type":"text","text":": Don’t assume annual periods"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Sensitivity analysis is critical","type":"text"}],"type":"strong"},{"type":"text","text":": Test key assumptions"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Risk matters","type":"text"}],"type":"strong"},{"text":": Higher risk requires higher returns","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Compare alternatives"}]},{"type":"text","text":": Evaluate opportunity cost"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Update regularly"}],"type":"strong"},{"text":": Reassess as circumstances change","type":"text"}]}]}],"type":"orderedList"},{"anchor":"Next-Steps","type":"heading","level":2,"text":"Next Steps"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Build an investment calculator using these functions","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Create a portfolio optimization tool"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Develop scenario planning models"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Integrate with real financial data","type":"text"}],"type":"paragraph"}]}]}],"kind":"content"}],"references":{"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/PortfolioOptimizationGuide":{"identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/PortfolioOptimizationGuide","type":"topic","title":"Portfolio Optimization","url":"\/documentation\/businessmath\/portfoliooptimizationguide","abstract":[{"type":"text","text":"Build optimal investment portfolios using Modern Portfolio Theory and risk parity strategies."}],"kind":"article","role":"article"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/LeaseAccountingGuide":{"kind":"article","role":"article","title":"Lease Accounting (IFRS 16 \/ ASC 842)","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/LeaseAccountingGuide","abstract":[{"type":"text","text":"Model lease liabilities, right-of-use assets, and lease accounting under modern standards."}],"url":"\/documentation\/businessmath\/leaseaccountingguide","type":"topic"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/EquityFinancingGuide":{"identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/EquityFinancingGuide","type":"topic","title":"Equity Financing and Cap Table Modeling","kind":"article","url":"\/documentation\/businessmath\/equityfinancingguide","abstract":[{"type":"text","text":"Model startup financing rounds, cap tables, SAFEs, convertible notes, and liquidation scenarios."}],"role":"article"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath":{"identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath","type":"topic","title":"BusinessMath","url":"\/documentation\/businessmath","kind":"article","abstract":[{"text":"A comprehensive Swift library for business mathematics, time series analysis, and financial modeling.","type":"text"}],"role":"collection"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/ForecastingGuide":{"kind":"article","role":"article","title":"Time Series Forecasting","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/ForecastingGuide","abstract":[{"type":"text","text":"Predict future values using statistical forecasting methods with BusinessMath."}],"url":"\/documentation\/businessmath\/forecastingguide","type":"topic"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/BuildingRevenueModel":{"kind":"article","role":"article","title":"Building a Revenue Forecasting Model","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/BuildingRevenueModel","abstract":[{"type":"text","text":"Create a complete revenue forecast with trend analysis and seasonality."}],"url":"\/documentation\/businessmath\/buildingrevenuemodel","type":"topic"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/TimeValueOfMoney":{"kind":"article","role":"article","title":"Time Value of Money","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/TimeValueOfMoney","abstract":[{"type":"text","text":"Calculate present value, future value, and investment returns for financial analysis."}],"url":"\/documentation\/businessmath\/timevalueofmoney","type":"topic"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/RealOptionsGuide":{"identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/RealOptionsGuide","type":"topic","url":"\/documentation\/businessmath\/realoptionsguide","title":"Real Options Valuation","abstract":[{"type":"text","text":"Value strategic flexibility and managerial decisions using option pricing theory."}],"kind":"article","role":"article"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/BuildingFinancialReports":{"abstract":[{"type":"text","text":"Create comprehensive financial reports with operational metrics, period summaries, and trend analysis."}],"url":"\/documentation\/businessmath\/buildingfinancialreports","role":"article","kind":"article","title":"Building Multi-Period Financial Reports","type":"topic","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/BuildingFinancialReports"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/DebtAndFinancingGuide":{"identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/DebtAndFinancingGuide","type":"topic","url":"\/documentation\/businessmath\/debtandfinancingguide","title":"Debt & Financing Models","abstract":[{"type":"text","text":"Learn how to model debt instruments, capital structure, equity financing, covenants, and lease accounting."}],"kind":"article","role":"article"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/ScenarioAnalysisGuide":{"identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/ScenarioAnalysisGuide","type":"topic","title":"Scenario & Sensitivity Analysis","url":"\/documentation\/businessmath\/scenarioanalysisguide","abstract":[{"type":"text","text":"Learn how to model multiple scenarios and analyze which inputs have the greatest impact on your outcomes."}],"kind":"article","role":"article"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/VisualizationGuide":{"identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/VisualizationGuide","type":"topic","url":"\/documentation\/businessmath\/visualizationguide","title":"Command-Line Visualization","abstract":[{"type":"text","text":"Learn how to create visual representations of data directly in the terminal."}],"kind":"article","role":"article"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/OptimizationGuide":{"kind":"article","role":"article","title":"Optimization and Numerical Solvers","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/OptimizationGuide","abstract":[{"type":"text","text":"Learn how to find optimal values and solve equations using BusinessMath’s optimization toolkit."}],"url":"\/documentation\/businessmath\/optimizationguide","type":"topic"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/FinancialStatementsGuide":{"kind":"article","role":"article","title":"Building Financial Statements","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/FinancialStatementsGuide","abstract":[{"type":"text","text":"Learn how to model complete financial statements including Income Statement, Balance Sheet, and Cash Flow Statement."}],"url":"\/documentation\/businessmath\/financialstatementsguide","type":"topic"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/FinancialRatiosGuide":{"identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/FinancialRatiosGuide","type":"topic","title":"Financial Ratios & Metrics","url":"\/documentation\/businessmath\/financialratiosguide","abstract":[{"type":"text","text":"Learn how to analyze financial performance using key ratios and metrics."}],"kind":"article","role":"article"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/RiskAnalyticsGuide":{"abstract":[{"type":"text","text":"Measure and manage risk with comprehensive analytics and scenario testing."}],"url":"\/documentation\/businessmath\/riskanalyticsguide","role":"article","kind":"article","title":"Risk Analytics and Stress Testing","type":"topic","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/RiskAnalyticsGuide"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/LoanAmortization":{"kind":"article","role":"article","title":"Loan Amortization Analysis","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/LoanAmortization","abstract":[{"type":"text","text":"Build a complete loan amortization schedule and analyze payment breakdowns."}],"url":"\/documentation\/businessmath\/loanamortization","type":"topic"}}}