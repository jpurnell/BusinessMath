{"sections":[],"schemaVersion":{"major":0,"minor":3,"patch":0},"identifier":{"url":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/LoanAmortization","interfaceLanguage":"swift"},"seeAlsoSections":[{"anchor":"Related-Documentation","identifiers":["doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/TimeValueOfMoney","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/InvestmentAnalysis"],"title":"Related Documentation"},{"anchor":"Tutorials","generated":true,"identifiers":["doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/BuildingRevenueModel","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/FinancialStatementsGuide","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/BuildingFinancialReports","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/ScenarioAnalysisGuide","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/FinancialRatiosGuide","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/VisualizationGuide","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/DebtAndFinancingGuide","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/EquityFinancingGuide","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/LeaseAccountingGuide","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/InvestmentAnalysis","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/OptimizationGuide","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/ForecastingGuide","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/PortfolioOptimizationGuide","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/RealOptionsGuide","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/RiskAnalyticsGuide"],"title":"Tutorials"}],"hierarchy":{"paths":[["doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath"]]},"abstract":[{"text":"Build a complete loan amortization schedule and analyze payment breakdowns.","type":"text"}],"metadata":{"role":"article","roleHeading":"Article","title":"Loan Amortization Analysis"},"kind":"article","primaryContentSections":[{"content":[{"type":"heading","level":2,"anchor":"Overview","text":"Overview"},{"type":"paragraph","inlineContent":[{"text":"This tutorial shows you how to analyze loans using BusinessMath’s time value of money functions. You’ll learn how to:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Calculate monthly loan payments"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Generate complete amortization schedules"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Analyze principal vs. interest breakdown","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Compare different loan scenarios","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Calculate cumulative totals for tax purposes"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Evaluate payoff strategies"}]}]}]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Time estimate:","type":"text"}],"type":"strong"},{"text":" 20-30 minutes","type":"text"}]},{"type":"heading","level":2,"anchor":"Prerequisites","text":"Prerequisites"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Basic understanding of Swift"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Familiarity with loan concepts (principal, interest, amortization)"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Understanding of time value of money (see "},{"identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/TimeValueOfMoney","type":"reference","isActive":true},{"type":"text","text":")"}],"type":"paragraph"}]}]},{"text":"Step 1: Define the Loan","type":"heading","level":2,"anchor":"Step-1-Define-the-Loan"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Start with the loan parameters. We’ll use a typical 30-year mortgage."}]},{"type":"codeListing","syntax":"swift","code":["import BusinessMath","","\/\/ Loan parameters","let principal = 300_000.0      \/\/ $300,000 home loan","let annualRate = 0.06          \/\/ 6% annual interest rate","let years = 30                 \/\/ 30-year term","let monthlyRate = annualRate \/ 12","let totalPayments = years * 12  \/\/ 360 payments","","print(\"Mortgage Loan Analysis\")","print(\"=====================\")","print(\"Principal: $\\(String(format: \"%.2f\", principal))\")","print(\"Annual Rate: \\(String(format: \"%.2f%%\", annualRate * 100))\")","print(\"Term: \\(years) years (\\(totalPayments) payments)\")","print(\"Monthly Rate: \\(String(format: \"%.4f%%\", monthlyRate * 100))\")"]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Expected output:"}],"type":"strong"}]},{"type":"codeListing","syntax":null,"code":["Mortgage Loan Analysis","=====================","Principal: $300,000.00","Annual Rate: 6.00%","Term: 30 years (360 payments)","Monthly Rate: 0.5000%"]},{"text":"Step 2: Calculate Monthly Payment","type":"heading","level":2,"anchor":"Step-2-Calculate-Monthly-Payment"},{"type":"paragraph","inlineContent":[{"text":"Use the ","type":"text"},{"code":"payment()","type":"codeVoice"},{"text":" function to calculate the monthly payment.","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["\/\/ Calculate monthly payment","let monthlyPayment = payment(","    presentValue: principal,","    rate: monthlyRate,","    periods: totalPayments,","    futureValue: 0,  \/\/ Loan fully paid off at end","    type: .ordinary  \/\/ Payments at end of month",")","","print(\"\\nMonthly Payment: $\\(String(format: \"%.2f\", monthlyPayment))\")","","\/\/ Calculate total amount paid over life of loan","let totalPaid = monthlyPayment * Double(totalPayments)","let totalInterest = totalPaid - principal","","print(\"Total Paid: $\\(String(format: \"%.2f\", totalPaid))\")","print(\"Total Interest: $\\(String(format: \"%.2f\", totalInterest))\")","print(\"Interest as % of Principal: \\(String(format: \"%.1f%%\", (totalInterest \/ principal) * 100))\")"]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Expected output:","type":"text"}]}]},{"type":"codeListing","syntax":null,"code":["Monthly Payment: $1,798.65","","Total Paid: $647,514.57","Total Interest: $347,514.57","Interest as % of Principal: 115.8%"]},{"type":"aside","style":"note","name":"Note","content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Note:"}]},{"type":"text","text":" You pay more in interest than the original principal! This is why it’s important to understand amortization."}],"type":"paragraph"}]},{"text":"Step 3: Analyze First Payment","type":"heading","level":2,"anchor":"Step-3-Analyze-First-Payment"},{"type":"paragraph","inlineContent":[{"text":"Break down the first payment into principal and interest components.","type":"text"}]},{"type":"codeListing","code":["\/\/ First payment breakdown","let firstInterest = interestPayment(","    rate: monthlyRate,","    period: 1,","    totalPeriods: totalPayments,","    presentValue: principal,","    futureValue: 0,","    type: .ordinary",")","","let firstPrincipal = principalPayment(","    rate: monthlyRate,","    period: 1,","    totalPeriods: totalPayments,","    presentValue: principal,","    futureValue: 0,","    type: .ordinary",")","","print(\"\\nFirst Payment Breakdown:\")","print(\"  Interest: $\\(String(format: \"%.2f\", firstInterest)) (\\(String(format: \"%.1f%%\", (firstInterest \/ monthlyPayment) * 100)))\")","print(\"  Principal: $\\(String(format: \"%.2f\", firstPrincipal)) (\\(String(format: \"%.1f%%\", (firstPrincipal \/ monthlyPayment) * 100)))\")","print(\"  Total: $\\(String(format: \"%.2f\", firstInterest + firstPrincipal))\")","","\/\/ Verify it matches monthly payment","let difference = abs((firstInterest + firstPrincipal) - monthlyPayment)","print(\"  Verification: \\(difference < 0.01 ? \"✓ Correct\" : \"✗ Error\")\")"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Expected output:","type":"text"}],"type":"strong"}]},{"type":"codeListing","code":["First Payment Breakdown:","  Interest: $1,500.00 (83.4%)","  Principal: $298.65 (16.6%)","  Total: $1,798.65","  Verification: ✓ Correct"],"syntax":null},{"type":"aside","style":"note","content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Insight:","type":"text"}]},{"text":" In early payments, most goes to interest. Only 17% reduces principal!","type":"text"}],"type":"paragraph"}],"name":"Note"},{"type":"heading","anchor":"Step-4-Analyze-Last-Payment","level":2,"text":"Step 4: Analyze Last Payment"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Compare to the final payment to see how the balance shifts."}]},{"type":"codeListing","code":["\/\/ Last payment breakdown","let lastInterest = interestPayment(","    rate: monthlyRate,","    period: totalPayments,","    totalPeriods: totalPayments,","    presentValue: principal,","    futureValue: 0,","    type: .ordinary",")","","let lastPrincipal = principalPayment(","    rate: monthlyRate,","    period: totalPayments,","    totalPeriods: totalPayments,","    presentValue: principal,","    futureValue: 0,","    type: .ordinary",")","","print(\"\\nLast Payment Breakdown (Payment #\\(totalPayments)):\")","print(\"  Interest: $\\(String(format: \"%.2f\", lastInterest)) (\\(String(format: \"%.1f%%\", (lastInterest \/ monthlyPayment) * 100)))\")","print(\"  Principal: $\\(String(format: \"%.2f\", lastPrincipal)) (\\(String(format: \"%.1f%%\", (lastPrincipal \/ monthlyPayment) * 100)))\")","print(\"  Total: $\\(String(format: \"%.2f\", lastInterest + lastPrincipal))\")","","print(\"\\nChange from First to Last Payment:\")","print(\"  Interest: $\\(String(format: \"%.2f\", firstInterest)) → $\\(String(format: \"%.2f\", lastInterest))\")","print(\"  Principal: $\\(String(format: \"%.2f\", firstPrincipal)) → $\\(String(format: \"%.2f\", lastPrincipal))\")"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Expected output:","type":"text"}]}]},{"type":"codeListing","code":["Last Payment Breakdown (Payment #360):","  Interest: $8.94 (0.5%)","  Principal: $1,789.71 (99.5%)","  Total: $1,798.65","","Change from First to Last Payment:","  Interest: $1,500.00 → $8.94","  Principal: $298.65 → $1,789.71"],"syntax":null},{"type":"aside","style":"note","content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Insight:"}],"type":"strong"},{"type":"text","text":" By the end, almost all payment goes to principal!"}],"type":"paragraph"}],"name":"Note"},{"type":"heading","anchor":"Step-5-Generate-Amortization-Schedule","level":2,"text":"Step 5: Generate Amortization Schedule"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Create a complete payment-by-payment schedule."}]},{"type":"codeListing","code":["\/\/ Generate full amortization schedule","print(\"\\nAmortization Schedule (First 12 Months):\")","print(\"Payment | Principal  | Interest   | Balance\")","print(\"--------|------------|------------|----------\")","","var remainingBalance = principal","","for month in 1...12 {","    let interestPmt = interestPayment(","        rate: monthlyRate,","        period: month,","        totalPeriods: totalPayments,","        presentValue: principal,","        futureValue: 0,","        type: .ordinary","    )","","    let principalPmt = principalPayment(","        rate: monthlyRate,","        period: month,","        totalPeriods: totalPayments,","        presentValue: principal,","        futureValue: 0,","        type: .ordinary","    )","","    remainingBalance -= principalPmt","","    print(String(format: \"  %3d   | $%9.2f | $%9.2f | $%10.2f\",","                 month, principalPmt, interestPmt, remainingBalance))","}","","\/\/ Show sample from middle and end","print(\"  ...   |    ...     |    ...     |    ...\")","","\/\/ Month 180 (halfway)","let mid = totalPayments \/ 2","let midInterest = interestPayment(rate: monthlyRate, period: mid, totalPeriods: totalPayments,","                                  presentValue: principal, futureValue: 0, type: .ordinary)","let midPrincipal = principalPayment(rate: monthlyRate, period: mid, totalPeriods: totalPayments,","                                    presentValue: principal, futureValue: 0, type: .ordinary)","let midBalance = principal - (1...mid).map { period in","    principalPayment(rate: monthlyRate, period: period, totalPeriods: totalPayments,","                    presentValue: principal, futureValue: 0, type: .ordinary)","}.reduce(0, +)","","print(String(format: \"  %3d   | $%9.2f | $%9.2f | $%10.2f\",","             mid, midPrincipal, midInterest, midBalance))"],"syntax":"swift"},{"type":"heading","anchor":"Step-6-Analyze-by-Year","level":2,"text":"Step 6: Analyze by Year"},{"type":"paragraph","inlineContent":[{"text":"Calculate annual totals for tax and accounting purposes.","type":"text"}]},{"type":"codeListing","code":["\/\/ Calculate totals for each year","print(\"\\n\\nAnnual Summary:\")","print(\"Year | Principal  | Interest   | Total Payments | Ending Balance\")","print(\"-----|------------|------------|----------------|---------------\")","","var cumulativePrincipal = 0.0","var currentBalance = principal","","for year in 1...5 {  \/\/ Show first 5 years","    let startPeriod = (year - 1) * 12 + 1","    let endPeriod = year * 12","","    let yearInterest = cumulativeInterest(","        rate: monthlyRate,","        startPeriod: startPeriod,","        endPeriod: endPeriod,","        totalPeriods: totalPayments,","        presentValue: principal,","        futureValue: 0,","        type: .ordinary","    )","","    let yearPrincipal = cumulativePrincipal(","        rate: monthlyRate,","        startPeriod: startPeriod,","        endPeriod: endPeriod,","        totalPeriods: totalPayments,","        presentValue: principal,","        futureValue: 0,","        type: .ordinary","    )","","    cumulativePrincipal += yearPrincipal","    currentBalance -= yearPrincipal","","    let yearTotal = yearInterest + yearPrincipal","","    print(String(format: \"  %2d | $%10.2f | $%10.2f | $%14.2f | $%13.2f\",","                 year, yearPrincipal, yearInterest, yearTotal, currentBalance))","}","","print(\" ... |    ...     |    ...     |      ...       |     ...\")","","\/\/ Show year 30","let year30Interest = cumulativeInterest(","    rate: monthlyRate,","    startPeriod: 349,  \/\/ Last 12 payments","    endPeriod: 360,","    totalPeriods: totalPayments,","    presentValue: principal,","    futureValue: 0,","    type: .ordinary",")","","let year30Principal = cumulativePrincipal(","    rate: monthlyRate,","    startPeriod: 349,","    endPeriod: 360,","    totalPeriods: totalPayments,","    presentValue: principal,","    futureValue: 0,","    type: .ordinary",")","","print(String(format: \"  %2d | $%10.2f | $%10.2f | $%14.2f | $%13.2f\",","             30, year30Principal, year30Interest, year30Principal + year30Interest, 0.0))"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Expected output:","type":"text"}]}]},{"type":"codeListing","code":["Annual Summary:","Year | Principal   | Interest    | Total Payments  | Ending Balance","-----|-------------|-------------|-----------------|---------------","   1 | $   3684.04 | $  17899.78 | $      21583.82 | $    296315.96","   2 | $   3911.26 | $  17672.56 | $      21583.82 | $    292404.71","   3 | $   4152.50 | $  17431.32 | $      21583.82 | $    288252.21","   4 | $   4408.61 | $  17175.21 | $      21583.82 | $    283843.60","   5 | $   4680.53 | $  16903.29 | $      21583.82 | $    279163.07"," ... |    ...      |    ...      |      ...        |     ...","  30 | $  20898.41 | $    685.41 | $      21583.82 | $         0.00"],"syntax":null},{"type":"aside","content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Insight:","type":"text"}]},{"type":"text","text":" Year 1 interest ($17,859) is tax deductible if itemizing!"}],"type":"paragraph"}],"style":"note","name":"Note"},{"level":2,"text":"Step 7: Compare Loan Scenarios","type":"heading","anchor":"Step-7-Compare-Loan-Scenarios"},{"inlineContent":[{"text":"Compare different loan terms and rates.","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["print(\"\\n\\nLoan Comparison:\")","print(\"Scenario              | Payment   | Total Paid | Total Interest\")","print(\"----------------------|-----------|------------|---------------\")","","\/\/ Scenario 1: Original (30-year, 6%)","print(String(format: \"30-year @ 6.00%%      | $%8.2f | $%9.2f | $%13.2f\",","             monthlyPayment, totalPaid, totalInterest))","","\/\/ Scenario 2: 15-year loan","let payment15yr = payment(presentValue: principal, rate: monthlyRate,","                          periods: 15 * 12, futureValue: 0, type: .ordinary)","let total15yr = payment15yr * Double(15 * 12)","let interest15yr = total15yr - principal","print(String(format: \"15-year @ 6.00%%      | $%8.2f | $%9.2f | $%13.2f\",","             payment15yr, total15yr, interest15yr))","","\/\/ Scenario 3: Lower rate (5%)","let lowRate = 0.05 \/ 12","let paymentLowRate = payment(presentValue: principal, rate: lowRate,","                             periods: totalPayments, futureValue: 0, type: .ordinary)","let totalLowRate = paymentLowRate * Double(totalPayments)","let interestLowRate = totalLowRate - principal","print(String(format: \"30-year @ 5.00%%      | $%8.2f | $%9.2f | $%13.2f\",","             paymentLowRate, totalLowRate, interestLowRate))","","\/\/ Scenario 4: Higher rate (7%)","let highRate = 0.07 \/ 12","let paymentHighRate = payment(presentValue: principal, rate: highRate,","                              periods: totalPayments, futureValue: 0, type: .ordinary)","let totalHighRate = paymentHighRate * Double(totalPayments)","let interestHighRate = totalHighRate - principal","print(String(format: \"30-year @ 7.00%%      | $%8.2f | $%9.2f | $%13.2f\",","             paymentHighRate, totalHighRate, interestHighRate))","","print(\"\\nKey Insights:\")","print(\"  • 15-year term saves $\\(String(format: \"%.0f\", totalInterest - interest15yr)) in interest\")","print(\"  • But increases payment by $\\(String(format: \"%.0f\", payment15yr - monthlyPayment))\/month\")","print(\"  • 1% rate increase adds $\\(String(format: \"%.0f\", paymentHighRate - monthlyPayment))\/month\")","print(\"  • And $\\(String(format: \"%.0f\", interestHighRate - totalInterest)) more in total interest\")"],"syntax":"swift"},{"level":2,"text":"Step 8: Evaluate Extra Payment Strategy","type":"heading","anchor":"Step-8-Evaluate-Extra-Payment-Strategy"},{"inlineContent":[{"text":"See the impact of making extra principal payments.","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["\/\/ Strategy: Pay extra $200\/month toward principal","let extraPayment = 200.0","let totalMonthlyPayment = monthlyPayment + extraPayment","","print(\"\\n\\nExtra Payment Analysis:\")","print(\"Standard payment: $\\(String(format: \"%.2f\", monthlyPayment))\")","print(\"Extra payment: $\\(String(format: \"%.2f\", extraPayment))\")","print(\"Total payment: $\\(String(format: \"%.2f\", totalMonthlyPayment))\")","","\/\/ Calculate payoff time with extra payments","var balance = principal","var month = 0","var totalPaidWithExtra = 0.0","var totalInterestWithExtra = 0.0","","while balance > 0 && month < totalPayments {","    month += 1","","    \/\/ Calculate interest on current balance","    let interest = balance * monthlyRate","","    \/\/ Apply payment","    let principalReduction = min(totalMonthlyPayment - interest, balance)","    balance -= principalReduction","","    totalPaidWithExtra += interest + principalReduction","    totalInterestWithExtra += interest","}","","let monthsSaved = totalPayments - month","let yearsSaved = Double(monthsSaved) \/ 12.0","let interestSaved = totalInterest - totalInterestWithExtra","","print(\"\\nResults with $\\(String(format: \"%.0f\", extraPayment))\/month extra:\")","print(\"  Payoff time: \\(month) months (\\(String(format: \"%.1f\", Double(month) \/ 12.0)) years)\")","print(\"  Time saved: \\(monthsSaved) months (\\(String(format: \"%.1f\", yearsSaved)) years)\")","print(\"  Total interest paid: $\\(String(format: \"%.2f\", totalInterestWithExtra))\")","print(\"  Interest saved: $\\(String(format: \"%.2f\", interestSaved))\")","print(\"  Extra principal paid: $\\(String(format: \"%.2f\", extraPayment * Double(month)))\")","print(\"  Net savings: $\\(String(format: \"%.2f\", interestSaved - (extraPayment * Double(month))))\")"],"syntax":"swift"},{"inlineContent":[{"inlineContent":[{"type":"text","text":"Expected output:"}],"type":"strong"}],"type":"paragraph"},{"type":"codeListing","code":["Extra Payment Analysis:","Standard payment: $1,798.65","Extra payment: $200.00","Total payment: $1,998.65","","Results with $200.00\/month extra:","\tPayoff time:\t\t\t279 months (23.2 years)","\tTime saved:\t\t\t\t81 months (6.8 years)","\tTotal interest paid:\t$256,341.13","\tInterest saved:\t\t\t$91,173.43","\tExtra principal paid:\t$55,800.00","\tNet savings:\t\t\t$35,373.43"],"syntax":null},{"type":"aside","content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Insight:"}]},{"type":"text","text":" $200\/month extra saves $91k in interest and pays off 6.8 years early!"}]}],"style":"note","name":"Note"},{"level":2,"text":"Step 9: Create a Reusable Function","type":"heading","anchor":"Step-9-Create-a-Reusable-Function"},{"inlineContent":[{"type":"text","text":"Package everything into a reusable function."}],"type":"paragraph"},{"type":"codeListing","code":["struct LoanAnalysis {","    let principal: Double","    let monthlyPayment: Double","    let totalPayments: Int","    let totalPaid: Double","    let totalInterest: Double","","    func printSummary() {","        print(\"Loan Analysis Summary\")","        print(\"=====================\")","        print(\"Principal: $\\(String(format: \"%.2f\", principal))\")","        print(\"Monthly Payment: $\\(String(format: \"%.2f\", monthlyPayment))\")","        print(\"Total Payments: \\(totalPayments)\")","        print(\"Total Paid: $\\(String(format: \"%.2f\", totalPaid))\")","        print(\"Total Interest: $\\(String(format: \"%.2f\", totalInterest))\")","        print(\"Interest \/ Principal: \\(String(format: \"%.1f%%\", (totalInterest \/ principal) * 100))\")","    }","}","","func analyzeLoan(principal: Double, annualRate: Double, years: Int) -> LoanAnalysis {","    let monthlyRate = annualRate \/ 12","    let totalPayments = years * 12","","    let monthlyPayment = payment(","        presentValue: principal,","        rate: monthlyRate,","        periods: totalPayments,","        futureValue: 0,","        type: .ordinary","    )","","    let totalPaid = monthlyPayment * Double(totalPayments)","    let totalInterest = totalPaid - principal","","    return LoanAnalysis(","        principal: principal,","        monthlyPayment: monthlyPayment,","        totalPayments: totalPayments,","        totalPaid: totalPaid,","        totalInterest: totalInterest","    )","}","","\/\/ Use it","let myLoan = analyzeLoan(principal: 300_000, annualRate: 0.06, years: 30)","myLoan.printSummary()","","\/\/ Compare different scenarios","print(\"\\nComparing scenarios:\")","analyzeLoan(principal: 300_000, annualRate: 0.06, years: 30).printSummary()","print()","analyzeLoan(principal: 300_000, annualRate: 0.06, years: 15).printSummary()"],"syntax":"swift"},{"level":2,"text":"Key Takeaways","type":"heading","anchor":"Key-Takeaways"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Early payments are mostly interest","type":"text"}]},{"type":"text","text":": In a 30-year loan, 83% of the first payment is interest"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Extra payments save significantly","type":"text"}]},{"type":"text","text":": Even $200\/month extra can save years and tens of thousands"}]}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Shorter terms save interest"}]},{"text":": A 15-year loan costs much less in total interest","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Rates matter"}],"type":"strong"},{"text":": 1% rate difference adds hundreds to monthly payments","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Understanding amortization helps"}]},{"type":"text","text":": Make informed decisions about mortgages and loans"}],"type":"paragraph"}]}],"type":"orderedList"},{"type":"heading","text":"Next Steps","level":2,"anchor":"Next-Steps"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Explore ","type":"text"},{"isActive":true,"identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/InvestmentAnalysis","type":"reference"},{"text":" to evaluate investments","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Read about "},{"type":"reference","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/TimeValueOfMoney","isActive":true},{"type":"text","text":" for more financial calculations"}]}]},{"content":[{"inlineContent":[{"text":"Build a loan calculator app using these functions","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Create a loan comparison tool for rate shopping","type":"text"}],"type":"paragraph"}]}]}],"kind":"content"}],"references":{"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/PortfolioOptimizationGuide":{"identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/PortfolioOptimizationGuide","type":"topic","title":"Portfolio Optimization","url":"\/documentation\/businessmath\/portfoliooptimizationguide","abstract":[{"type":"text","text":"Build optimal investment portfolios using Modern Portfolio Theory and risk parity strategies."}],"kind":"article","role":"article"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/LeaseAccountingGuide":{"kind":"article","role":"article","title":"Lease Accounting (IFRS 16 \/ ASC 842)","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/LeaseAccountingGuide","abstract":[{"type":"text","text":"Model lease liabilities, right-of-use assets, and lease accounting under modern standards."}],"url":"\/documentation\/businessmath\/leaseaccountingguide","type":"topic"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/InvestmentAnalysis":{"abstract":[{"type":"text","text":"Evaluate investment opportunities using NPV, IRR, and other financial metrics."}],"url":"\/documentation\/businessmath\/investmentanalysis","role":"article","kind":"article","title":"Investment Analysis","type":"topic","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/InvestmentAnalysis"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/ForecastingGuide":{"kind":"article","role":"article","title":"Time Series Forecasting","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/ForecastingGuide","abstract":[{"type":"text","text":"Predict future values using statistical forecasting methods with BusinessMath."}],"url":"\/documentation\/businessmath\/forecastingguide","type":"topic"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/EquityFinancingGuide":{"identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/EquityFinancingGuide","type":"topic","title":"Equity Financing and Cap Table Modeling","kind":"article","url":"\/documentation\/businessmath\/equityfinancingguide","abstract":[{"type":"text","text":"Model startup financing rounds, cap tables, SAFEs, convertible notes, and liquidation scenarios."}],"role":"article"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath":{"identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath","type":"topic","title":"BusinessMath","url":"\/documentation\/businessmath","kind":"article","abstract":[{"text":"A comprehensive Swift library for business mathematics, time series analysis, and financial modeling.","type":"text"}],"role":"collection"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/BuildingRevenueModel":{"kind":"article","role":"article","title":"Building a Revenue Forecasting Model","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/BuildingRevenueModel","abstract":[{"type":"text","text":"Create a complete revenue forecast with trend analysis and seasonality."}],"url":"\/documentation\/businessmath\/buildingrevenuemodel","type":"topic"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/TimeValueOfMoney":{"kind":"article","role":"article","title":"Time Value of Money","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/TimeValueOfMoney","abstract":[{"type":"text","text":"Calculate present value, future value, and investment returns for financial analysis."}],"url":"\/documentation\/businessmath\/timevalueofmoney","type":"topic"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/RealOptionsGuide":{"identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/RealOptionsGuide","type":"topic","url":"\/documentation\/businessmath\/realoptionsguide","title":"Real Options Valuation","abstract":[{"type":"text","text":"Value strategic flexibility and managerial decisions using option pricing theory."}],"kind":"article","role":"article"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/BuildingFinancialReports":{"abstract":[{"type":"text","text":"Create comprehensive financial reports with operational metrics, period summaries, and trend analysis."}],"url":"\/documentation\/businessmath\/buildingfinancialreports","role":"article","kind":"article","title":"Building Multi-Period Financial Reports","type":"topic","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/BuildingFinancialReports"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/DebtAndFinancingGuide":{"identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/DebtAndFinancingGuide","type":"topic","url":"\/documentation\/businessmath\/debtandfinancingguide","title":"Debt & Financing Models","abstract":[{"type":"text","text":"Learn how to model debt instruments, capital structure, equity financing, covenants, and lease accounting."}],"kind":"article","role":"article"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/ScenarioAnalysisGuide":{"identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/ScenarioAnalysisGuide","type":"topic","title":"Scenario & Sensitivity Analysis","url":"\/documentation\/businessmath\/scenarioanalysisguide","abstract":[{"type":"text","text":"Learn how to model multiple scenarios and analyze which inputs have the greatest impact on your outcomes."}],"kind":"article","role":"article"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/OptimizationGuide":{"kind":"article","role":"article","title":"Optimization and Numerical Solvers","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/OptimizationGuide","abstract":[{"type":"text","text":"Learn how to find optimal values and solve equations using BusinessMath’s optimization toolkit."}],"url":"\/documentation\/businessmath\/optimizationguide","type":"topic"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/VisualizationGuide":{"identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/VisualizationGuide","type":"topic","url":"\/documentation\/businessmath\/visualizationguide","title":"Command-Line Visualization","abstract":[{"type":"text","text":"Learn how to create visual representations of data directly in the terminal."}],"kind":"article","role":"article"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/FinancialStatementsGuide":{"kind":"article","role":"article","title":"Building Financial Statements","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/FinancialStatementsGuide","abstract":[{"type":"text","text":"Learn how to model complete financial statements including Income Statement, Balance Sheet, and Cash Flow Statement."}],"url":"\/documentation\/businessmath\/financialstatementsguide","type":"topic"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/FinancialRatiosGuide":{"identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/FinancialRatiosGuide","type":"topic","title":"Financial Ratios & Metrics","url":"\/documentation\/businessmath\/financialratiosguide","abstract":[{"type":"text","text":"Learn how to analyze financial performance using key ratios and metrics."}],"kind":"article","role":"article"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/RiskAnalyticsGuide":{"abstract":[{"type":"text","text":"Measure and manage risk with comprehensive analytics and scenario testing."}],"url":"\/documentation\/businessmath\/riskanalyticsguide","role":"article","kind":"article","title":"Risk Analytics and Stress Testing","type":"topic","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/RiskAnalyticsGuide"}}}