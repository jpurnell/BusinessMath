{"sections":[],"schemaVersion":{"patch":0,"minor":3,"major":0},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/TimeSeries"},"seeAlsoSections":[{"identifiers":["doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/GettingStarted","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/TimeValueOfMoney","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/GrowthModeling"],"anchor":"Related-Documentation","title":"Related Documentation"},{"identifiers":["doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/GettingStarted","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/TimeValueOfMoney","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/GrowthModeling"],"anchor":"Essentials","title":"Essentials","generated":true}],"hierarchy":{"paths":[["doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath"]]},"abstract":[{"type":"text","text":"Work with temporal data using periods and time series containers."}],"metadata":{"role":"article","roleHeading":"Article","title":"Time Series Analysis"},"kind":"article","primaryContentSections":[{"content":[{"type":"heading","level":2,"anchor":"Overview","text":"Overview"},{"type":"paragraph","inlineContent":[{"text":"Time series are fundamental to business analysis, representing data indexed by time periods. BusinessMath provides comprehensive support for creating, manipulating, and analyzing time series data through two core components:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Periods"}],"type":"strong"},{"type":"text","text":": Type-safe temporal identifiers (daily, monthly, quarterly, annual)"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"Time Series","type":"text"}],"type":"strong"},{"text":": Generic containers associating values with periods","type":"text"}],"type":"paragraph"}]}]},{"type":"heading","level":2,"anchor":"Periods","text":"Periods"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Periods represent discrete time intervals in your data. They provide a strongly-typed way to work with temporal data at different granularities."}]},{"type":"heading","level":3,"anchor":"Creating-Periods","text":"Creating Periods"},{"type":"codeListing","syntax":"swift","code":["\/\/ Monthly periods","let jan2025 = Period.month(year: 2025, month: 1)","let feb2025 = Period.month(year: 2025, month: 2)","","\/\/ Quarterly periods","let q1_2025 = Period.quarter(year: 2025, quarter: 1)","let q2_2025 = Period.quarter(year: 2025, quarter: 2)","","\/\/ Annual periods","let fy2025 = Period.year(2025)","let fy2026 = Period.year(2026)","","\/\/ Daily periods","let today = Period.day(Date())","let tomorrow = Period.day(Date().addingTimeInterval(86400))"]},{"type":"heading","level":3,"anchor":"Period-Properties","text":"Period Properties"},{"type":"codeListing","syntax":"swift","code":["let period = Period.month(year: 2025, month: 3)","","\/\/ Get dates","let start = period.startDate  \/\/ March 1, 2025 00:00:00","let end = period.endDate      \/\/ March 31, 2025 23:59:59","","\/\/ Get label","let label = period.label      \/\/ \"2025-03\"","","\/\/ Custom formatting","let formatter = DateFormatter()","formatter.dateFormat = \"MMMM yyyy\"","let formatted = period.formatted(using: formatter)  \/\/ \"March 2025\""]},{"type":"heading","level":3,"anchor":"Period-Arithmetic","text":"Period Arithmetic"},{"type":"paragraph","inlineContent":[{"text":"Periods support arithmetic operations for moving through time:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["let jan = Period.month(year: 2025, month: 1)","","\/\/ Addition","let feb = jan + 1     \/\/ February 2025","let mar = jan + 2     \/\/ March 2025","","\/\/ Subtraction","let dec = jan - 1     \/\/ December 2024","","\/\/ Distance","let months = jan.distance(to: mar)  \/\/ 2","","\/\/ Ranges","let q1 = jan...(jan + 2)  \/\/ [Jan, Feb, Mar]","for month in q1 {","    print(month.label)","}"]},{"type":"heading","level":3,"anchor":"Period-Subdivision","text":"Period Subdivision"},{"type":"paragraph","inlineContent":[{"text":"Larger periods can be subdivided into smaller periods:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["\/\/ Year to quarters","let year = Period.year(2025)","let quarters = year.quarters()  \/\/ [Q1 2025, Q2 2025, Q3 2025, Q4 2025]","","\/\/ Year to months","let months = year.months()  \/\/ [Jan 2025, Feb 2025, ..., Dec 2025]","","\/\/ Quarter to months","let q1 = Period.quarter(year: 2025, quarter: 1)","let q1Months = q1.months()  \/\/ [Jan 2025, Feb 2025, Mar 2025]","","\/\/ Month to days (leap year aware)","let march = Period.month(year: 2025, month: 3)","let days = march.days()  \/\/ [Mar 1, Mar 2, ..., Mar 31]"]},{"type":"heading","text":"Period Comparison","level":3,"anchor":"Period-Comparison"},{"type":"paragraph","inlineContent":[{"text":"Periods are comparable using type-first ordering:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["let daily = Period.day(Date())","let monthly = Period.month(year: 2025, month: 1)","let quarterly = Period.quarter(year: 2025, quarter: 1)","let annual = Period.year(2025)","","\/\/ Type-first comparison: daily < monthly < quarterly < annual","daily < monthly      \/\/ true","monthly < quarterly  \/\/ true","quarterly < annual   \/\/ true","","\/\/ Within same type, chronological order","Period.month(year: 2025, month: 1) < Period.month(year: 2025, month: 2)  \/\/ true","Period.year(2024) < Period.year(2025)  \/\/ true"]},{"type":"heading","text":"Time Series","level":2,"anchor":"Time-Series"},{"type":"paragraph","inlineContent":[{"type":"text","text":"A time series associates values with periods, enabling temporal data analysis."}]},{"type":"heading","text":"Creating Time Series","level":3,"anchor":"Creating-Time-Series"},{"type":"codeListing","syntax":"swift","code":["\/\/ From parallel arrays","let periods = [","    Period.month(year: 2025, month: 1),","    Period.month(year: 2025, month: 2),","    Period.month(year: 2025, month: 3)","]","let values: [Double] = [100_000, 120_000, 115_000]","","let ts = TimeSeries(periods: periods, values: values)","","\/\/ From dictionary","let data: [Period: Double] = [","    Period.month(year: 2025, month: 1): 100_000,","    Period.month(year: 2025, month: 2): 120_000,","    Period.month(year: 2025, month: 3): 115_000","]","let ts2 = TimeSeries(data: data)","","\/\/ With metadata","let metadata = TimeSeriesMetadata(","    name: \"Monthly Revenue\",","    description: \"Revenue by month for FY2025\",","    unit: \"USD\"",")","let ts3 = TimeSeries(periods: periods, values: values, metadata: metadata)"]},{"type":"heading","text":"Accessing Values","level":3,"anchor":"Accessing-Values"},{"type":"codeListing","syntax":"swift","code":["let ts = TimeSeries(periods: periods, values: values)","","\/\/ Subscript access (returns Optional)","if let janRevenue = ts[Period.month(year: 2025, month: 1)] {","    print(\"January: $\\(janRevenue)\")","}","","\/\/ Subscript with default value","let febRevenue = ts[Period.month(year: 2025, month: 2), default: 0.0]","","\/\/ Access all values as array","let allValues = ts.valuesArray  \/\/ [100_000, 120_000, 115_000]","","\/\/ First and last values","let first = ts.first  \/\/ Optional(100_000)","let last = ts.last    \/\/ Optional(115_000)","","\/\/ Count and isEmpty","let count = ts.count      \/\/ 3","let empty = ts.isEmpty    \/\/ false"]},{"type":"heading","text":"Iteration","level":3,"anchor":"Iteration"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Time series conform to "},{"type":"codeVoice","code":"Sequence"},{"type":"text","text":", enabling iteration:"}]},{"type":"codeListing","syntax":"swift","code":["\/\/ Iterate over values","for value in ts {","    print(value)","}","","\/\/ Use standard Sequence operations","let total = ts.reduce(0.0, +)           \/\/ Sum all values","let doubled = ts.map { $0 * 2.0 }       \/\/ Double all values","let positive = ts.filter { $0 > 0 }     \/\/ Keep positive values","let max = ts.max()                       \/\/ Find maximum value"]},{"type":"heading","text":"Range Extraction","level":3,"anchor":"Range-Extraction"},{"type":"paragraph","inlineContent":[{"text":"Extract subsets of time series:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["let ts = TimeSeries(","    periods: (1...12).map { Period.month(year: 2025, month: $0) },","    values: [100, 105, 110, 108, 115, 120, 118, 125, 130, 128, 135, 140]",")","","\/\/ Extract Q1 (Jan-Mar)","let q1Start = Period.month(year: 2025, month: 1)","let q1End = Period.month(year: 2025, month: 3)","let q1 = ts.range(from: q1Start, to: q1End)","\/\/ Result: TimeSeries with 3 periods [Jan, Feb, Mar]","","\/\/ Extract H1 (Jan-Jun)","let h1 = ts.range(","    from: Period.month(year: 2025, month: 1),","    to: Period.month(year: 2025, month: 6)",")","\/\/ Result: TimeSeries with 6 periods"]},{"type":"heading","text":"Time Series Operations","level":2,"anchor":"Time-Series-Operations"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Transform and combine time series with operations."}]},{"type":"heading","text":"Transformations","level":3,"anchor":"Transformations"},{"type":"codeListing","syntax":"swift","code":["let revenue = TimeSeries(periods: periods, values: [100, 120, 115])","","\/\/ Map values","let revenueInK = revenue.mapValues { $0 \/ 1000.0 }","\/\/ Result: [100, 120, 115]","","\/\/ Filter values","let highRevenue = revenue.filterValues { $0 > 110 }","\/\/ Result: TimeSeries with Feb and Mar only","","\/\/ Zip two time series","let costs = TimeSeries(periods: periods, values: [60, 70, 65])","let profit = revenue.zip(with: costs) { revenue, cost in revenue - cost }","\/\/ Result: [40, 50, 50]"]},{"type":"heading","text":"Filling Missing Data","level":3,"anchor":"Filling-Missing-Data"},{"type":"codeListing","syntax":"swift","code":["\/\/ Create time series with gaps","let sparsePeriods = [","    Period.month(year: 2025, month: 1),","    Period.month(year: 2025, month: 3),  \/\/ Missing February","    Period.month(year: 2025, month: 5)   \/\/ Missing April","]","let sparseValues = [100.0, 120.0, 140.0]","let sparse = TimeSeries(periods: sparsePeriods, values: sparseValues)","","\/\/ Define complete range","let allMonths = Array(Period.month(year: 2025, month: 1)...Period.month(year: 2025, month: 5))","","\/\/ Forward fill","let forwardFilled = sparse.fillForward(over: allMonths)","\/\/ Result: [100, 100, 120, 120, 140] (carries forward)","","\/\/ Backward fill","let backwardFilled = sparse.fillBackward(over: allMonths)","\/\/ Result: [100, 120, 120, 140, 140] (carries backward)","","\/\/ Fill with constant","let constantFilled = sparse.fillMissing(with: 0.0, over: allMonths)","\/\/ Result: [100, 0, 120, 0, 140]","","\/\/ Linear interpolation","let interpolated = sparse.interpolate(over: allMonths)","\/\/ Result: [100, 110, 120, 130, 140] (linear between points)"]},{"type":"heading","text":"Aggregation","level":3,"anchor":"Aggregation"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Convert time series to coarser granularity:"}]},{"type":"codeListing","syntax":"swift","code":["\/\/ Monthly to quarterly","let monthly = TimeSeries(","    periods: (1...12).map { Period.month(year: 2025, month: $0) },","    values: [10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21]",")","","let quarterly = monthly.aggregate(to: .quarterly, method: .sum)","\/\/ Q1: 33 (10+11+12), Q2: 42 (13+14+15), Q3: 51, Q4: 60","","\/\/ Quarterly to annual","let annual = quarterly.aggregate(to: .annual, method: .sum)","\/\/ 2025: 186 (sum of all quarters)","","\/\/ Other aggregation methods","let avgQuarterly = monthly.aggregate(to: .quarterly, method: .average)","let maxQuarterly = monthly.aggregate(to: .quarterly, method: .max)","let minQuarterly = monthly.aggregate(to: .quarterly, method: .min)","let firstQuarterly = monthly.aggregate(to: .quarterly, method: .first)","let lastQuarterly = monthly.aggregate(to: .quarterly, method: .last)"]},{"type":"heading","text":"Time Series Analytics","level":2,"anchor":"Time-Series-Analytics"},{"inlineContent":[{"type":"text","text":"Analyze trends, growth, and patterns in time series data."}],"type":"paragraph"},{"type":"heading","level":3,"text":"Growth Rates","anchor":"Growth-Rates"},{"type":"codeListing","syntax":"swift","code":["let ts = TimeSeries(","    periods: (1...5).map { Period.year(2020 + $0) },","    values: [100, 110, 121, 133, 146]",")","","\/\/ Period-over-period growth","let growth = ts.growthRate(lag: 1)","\/\/ Result: [10%, 10%, 9.9%, 9.8%] (year-over-year)","","\/\/ CAGR over entire period (automatically calculates years from dates)","let compoundGrowth = ts.cagr(","    from: Period.year(2021),","    to: Period.year(2025)",")","\/\/ Result: ~10% CAGR","","\/\/ Percent change","let pctChange = ts.percentChange(lag: 1)","\/\/ Same as growth rate in decimal form"]},{"type":"heading","level":3,"text":"Moving Averages","anchor":"Moving-Averages"},{"type":"codeListing","syntax":"swift","code":["let daily = TimeSeries(","    periods: (0..<10).map { Period.day(Date().addingTimeInterval(Double($0) * 86400)) },","    values: [100, 105, 98, 102, 108, 104, 110, 106, 112, 115]",")","","\/\/ Simple moving average (3-day)","let sma = daily.movingAverage(window: 3)","\/\/ Smooths out daily fluctuations","","\/\/ Exponential moving average","let ema = daily.exponentialMovingAverage(alpha: 0.3)","\/\/ Gives more weight to recent values"]},{"type":"heading","level":3,"text":"Cumulative Operations","anchor":"Cumulative-Operations"},{"type":"codeListing","syntax":"swift","code":["let monthly = TimeSeries(","    periods: (1...12).map { Period.month(year: 2025, month: $0) },","    values: [10, 12, 11, 13, 15, 14, 16, 18, 17, 19, 21, 20]",")","","\/\/ Year-to-date cumulative","let ytd = monthly.cumulative()","\/\/ Result: [10, 22, 33, 46, 61, 75, 91, 109, 126, 145, 166, 186]","","\/\/ Rolling sums (quarterly)","let rolling = monthly.rollingSum(window: 3)","\/\/ Result: [-, -, 33, 36, 39, 42, 45, 48, 51, 54, 57, 60]"]},{"type":"heading","level":3,"text":"Differences","anchor":"Differences"},{"type":"codeListing","syntax":"swift","code":["let ts = TimeSeries(","    periods: periods,","    values: [100, 120, 115, 130]",")","","\/\/ First difference (change from previous period)","let diff = ts.diff(lag: 1)","\/\/ Result: [20, -5, 15]","","\/\/ Second difference (change in change)","let diff2 = diff.diff(lag: 1)","\/\/ Result: [-25, 20]"]},{"type":"heading","level":2,"text":"Fiscal Calendars","anchor":"Fiscal-Calendars"},{"type":"paragraph","inlineContent":[{"text":"Work with fiscal years that don’t align with calendar years.","type":"text"}]},{"type":"heading","level":3,"text":"Creating Fiscal Calendars","anchor":"Creating-Fiscal-Calendars"},{"type":"codeListing","syntax":"swift","code":["\/\/ Standard calendar year (Dec 31)","let standard = FiscalCalendar.standard","","\/\/ Apple's fiscal year (Sep 30)","let apple = FiscalCalendar(yearEnd: MonthDay(month: 9, day: 30))","","\/\/ Australian government (Jun 30)","let australia = FiscalCalendar(yearEnd: MonthDay(month: 6, day: 30))","","\/\/ UK government (Mar 31)","let uk = FiscalCalendar(yearEnd: MonthDay(month: 3, day: 31))"]},{"type":"heading","level":3,"text":"Fiscal Period Mapping","anchor":"Fiscal-Period-Mapping"},{"type":"codeListing","syntax":"swift","code":["let calendar = FiscalCalendar(yearEnd: MonthDay(month: 9, day: 30))  \/\/ Apple FY","","let date = Date()  \/\/ e.g., November 15, 2024","","\/\/ Get fiscal year","let fiscalYear = calendar.fiscalYear(for: date)","\/\/ Result: 2025 (FY2025 runs Oct 2024 - Sep 2025)","","\/\/ Get fiscal quarter","let fiscalQuarter = calendar.fiscalQuarter(for: date)","\/\/ Result: 1 (Q1 is Oct-Dec)","","\/\/ Get fiscal month","let fiscalMonth = calendar.fiscalMonth(for: date)","\/\/ Result: 2 (November is 2nd month of fiscal year)","","\/\/ Map Period to fiscal period","let period = Period.month(year: 2024, month: 11)","let fiscalPeriod = calendar.periodInFiscalYear(period)","\/\/ Result: 2"]},{"type":"heading","level":2,"text":"Best Practices","anchor":"Best-Practices"},{"type":"heading","level":3,"text":"Choose the Right Period Granularity","anchor":"Choose-the-Right-Period-Granularity"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Daily"}]},{"type":"text","text":": Operational metrics, production data, sensor readings"}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"Monthly","type":"text"}],"type":"strong"},{"type":"text","text":": Financial reporting, revenue analysis, most business metrics"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Quarterly","type":"text"}]},{"type":"text","text":": Executive reporting, earnings analysis, seasonal patterns"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Annual","type":"text"}]},{"type":"text","text":": Strategic planning, multi-year trends, fiscal year summaries"}],"type":"paragraph"}]}]},{"type":"heading","anchor":"Handle-Missing-Data-Appropriately","level":3,"text":"Handle Missing Data Appropriately"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Forward fill"}]},{"type":"text","text":": Use for status-like data (price levels, inventory counts)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Backward fill","type":"text"}],"type":"strong"},{"text":": Use when future values apply to past (policy changes)","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Interpolation"}]},{"text":": Use for continuous metrics (temperature, demand curves)","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Constant fill","type":"text"}]},{"type":"text","text":": Use when absence means zero (sales in closed stores)"}],"type":"paragraph"}]}]},{"type":"heading","anchor":"Metadata-is-Your-Friend","level":3,"text":"Metadata is Your Friend"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Always include descriptive metadata for clarity:"}]},{"type":"codeListing","syntax":"swift","code":["let metadata = TimeSeriesMetadata(","    name: \"Monthly Recurring Revenue\",","    description: \"MRR by month including new, expansion, and contraction\",","    unit: \"USD\"",")","let mrr = TimeSeries(periods: periods, values: values, metadata: metadata)"]},{"type":"heading","anchor":"Use-Type-Safety","level":3,"text":"Use Type Safety"},{"type":"paragraph","inlineContent":[{"text":"Leverage Swift’s type system to prevent errors:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["\/\/ Good: Type prevents mixing incompatible periods","let monthly = TimeSeries<Double>(...)  \/\/ Monthly periods","let quarterly = TimeSeries<Double>(...)  \/\/ Quarterly periods","","\/\/ Comparison at compile time ensures same period types","\/\/ Mixing period types in operations will fail safely"]}],"kind":"content"}],"references":{"doc://com.jpurnell.BusinessMath/documentation/BusinessMath":{"identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath","type":"topic","title":"BusinessMath","url":"\/documentation\/businessmath","kind":"article","abstract":[{"text":"A comprehensive Swift library for business mathematics, time series analysis, and financial modeling.","type":"text"}],"role":"collection"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/GrowthModeling":{"abstract":[{"type":"text","text":"Analyze trends, model growth patterns, and forecast future values."}],"url":"\/documentation\/businessmath\/growthmodeling","role":"article","kind":"article","title":"Growth Modeling and Forecasting","type":"topic","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/GrowthModeling"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/TimeValueOfMoney":{"kind":"article","role":"article","title":"Time Value of Money","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/TimeValueOfMoney","abstract":[{"type":"text","text":"Calculate present value, future value, and investment returns for financial analysis."}],"url":"\/documentation\/businessmath\/timevalueofmoney","type":"topic"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/GettingStarted":{"kind":"article","role":"article","title":"Getting Started with BusinessMath","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/GettingStarted","abstract":[{"type":"text","text":"Learn how to use BusinessMath for business calculations and financial modeling."}],"url":"\/documentation\/businessmath\/gettingstarted","type":"topic"}}}