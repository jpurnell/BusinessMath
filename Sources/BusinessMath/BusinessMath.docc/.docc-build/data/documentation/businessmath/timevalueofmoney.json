{"sections":[],"schemaVersion":{"patch":0,"major":0,"minor":3},"identifier":{"url":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/TimeValueOfMoney","interfaceLanguage":"swift"},"seeAlsoSections":[{"title":"Related Documentation","anchor":"Related-Documentation","identifiers":["doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/GettingStarted","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/TimeSeries","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/LoanAmortization","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/InvestmentAnalysis"]},{"title":"Essentials","anchor":"Essentials","generated":true,"identifiers":["doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/GettingStarted","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/TimeSeries","doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/GrowthModeling"]}],"hierarchy":{"paths":[["doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath"]]},"abstract":[{"text":"Calculate present value, future value, and investment returns for financial analysis.","type":"text"}],"kind":"article","metadata":{"roleHeading":"Article","title":"Time Value of Money","role":"article"},"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","type":"heading","level":2,"text":"Overview"},{"inlineContent":[{"text":"The time value of money (TVM) is a fundamental concept in finance: money available now is worth more than the same amount in the future due to its earning potential. BusinessMath provides comprehensive TVM functions for:","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Present and Future Value","type":"text"}]},{"type":"text","text":": Single amounts and annuities"}]}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Payment Calculations","type":"text"}]},{"type":"text","text":": Loan payments, amortization schedules"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Investment Analysis","type":"text"}],"type":"strong"},{"text":": NPV, IRR, profitability index, payback periods","type":"text"}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"Irregular Cash Flows","type":"text"}],"type":"strong"},{"type":"text","text":": XNPV and XIRR for real-world scenarios"}],"type":"paragraph"}]}]},{"inlineContent":[{"type":"text","text":"All functions support generic numeric types ("},{"type":"codeVoice","code":"Double"},{"type":"text","text":", "},{"type":"codeVoice","code":"Float"},{"text":", etc.) and handle edge cases like zero rates and negative rates (deflation).","type":"text"}],"type":"paragraph"},{"level":2,"text":"Present Value","type":"heading","anchor":"Present-Value"},{"inlineContent":[{"text":"Present value (PV) calculates what future cash flows are worth today.","type":"text"}],"type":"paragraph"},{"level":3,"text":"Single Amount","type":"heading","anchor":"Single-Amount"},{"inlineContent":[{"text":"The present value of a single future amount:","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["\/\/ What is $110,000 in 1 year worth today at 10% discount rate?","let pv = presentValue(futureValue: 110_000, rate: 0.10, periods: 1)","\/\/ Result: 100,000","","\/\/ What is $1,000,000 in 30 years worth today at 8% discount rate?","let pv30 = presentValue(futureValue: 1_000_000, rate: 0.08, periods: 30)","\/\/ Result: ~99,377 (only 10% of future value!)"],"type":"codeListing"},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Formula:","type":"text"}]}],"type":"paragraph"},{"syntax":null,"code":["PV = FV \/ (1 + r)^n","","Where:","- PV = Present Value","- FV = Future Value","- r = discount rate per period","- n = number of periods"],"type":"codeListing"},{"level":3,"text":"Annuity (Series of Payments)","type":"heading","anchor":"Annuity-Series-of-Payments"},{"inlineContent":[{"text":"The present value of a stream of equal payments:","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["\/\/ How much is $1,000\/month for 30 years worth today at 6% annual rate?","let pv = presentValueAnnuity(","    payment: 1_000,","    rate: 0.06 \/ 12,  \/\/ Monthly rate","    periods: 360,     \/\/ 30 years × 12 months","    type: .ordinary   \/\/ Payments at end of period",")","\/\/ Result: ~166,792 (much less than 1000×360 = $360,000)","","\/\/ Annuity due (payments at beginning of period)","let pvDue = presentValueAnnuity(","    payment: 1_000,","    rate: 0.06 \/ 12,","    periods: 360,","    type: .due",")","\/\/ Result: ~167,625 (slightly more than ordinary)"],"type":"codeListing"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Formula (Ordinary):"}]}],"type":"paragraph"},{"syntax":null,"code":["PV = PMT × [(1 - (1+r)^-n) \/ r]","","Where:","- PMT = payment per period","- r = discount rate per period","- n = number of periods"],"type":"codeListing"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Formula (Due):"}]}],"type":"paragraph"},{"syntax":null,"code":["PV_due = PV_ordinary × (1 + r)"],"type":"codeListing"},{"level":3,"text":"Real-World Applications","type":"heading","anchor":"Real-World-Applications"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Car Loan Valuation:"}]}],"type":"paragraph"},{"syntax":"swift","code":["\/\/ What is a $400\/month car payment for 5 years worth today at 6%?","let carLoan = presentValueAnnuity(","    payment: 400,","    rate: 0.06 \/ 12,","    periods: 60,","    type: .ordinary",")","\/\/ Result: ~20,690 (the car's financed value)"],"type":"codeListing"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Lottery Annuity vs Lump Sum:"}]}],"type":"paragraph"},{"syntax":"swift","code":["\/\/ $50,000\/year for 20 years vs lump sum today at 5% discount","let annuityValue = presentValueAnnuity(","    payment: 50_000,","    rate: 0.05,","    periods: 20,","    type: .ordinary",")","\/\/ Result: ~623,111","","\/\/ If lump sum offer is $600,000, take it!","\/\/ If lump sum offer is $650,000, definitely take it!"],"type":"codeListing"},{"inlineContent":[{"inlineContent":[{"type":"text","text":"Bond Valuation:"}],"type":"strong"}],"type":"paragraph"},{"syntax":"swift","code":["\/\/ Bond pays $50 coupon annually for 10 years plus $1,000 face value","\/\/ Market rate is 6%","","let couponPV = presentValueAnnuity(payment: 50, rate: 0.06, periods: 10, type: .ordinary)","let facePV = presentValue(futureValue: 1_000, rate: 0.06, periods: 10)","let bondValue = couponPV + facePV","\/\/ Result: ~926.40 (bond trades below par when market rate > coupon rate)"],"type":"codeListing"},{"anchor":"Future-Value","type":"heading","level":2,"text":"Future Value"},{"inlineContent":[{"type":"text","text":"Future value (FV) calculates what an amount today will grow to in the future."}],"type":"paragraph"},{"anchor":"Single-Amount","type":"heading","level":3,"text":"Single Amount"},{"syntax":"swift","code":["\/\/ $100,000 invested for 5 years at 8% annual return","let fv = futureValue(presentValue: 100_000, rate: 0.08, periods: 5)","\/\/ Result: ~146,933 (the power of compound growth)","","\/\/ $10,000 over 30 years at 10% (stock market historical average)","let fv30 = futureValue(presentValue: 10_000, rate: 0.10, periods: 30)","\/\/ Result: ~174,494 (17× growth!)"],"type":"codeListing"},{"inlineContent":[{"inlineContent":[{"type":"text","text":"Formula:"}],"type":"strong"}],"type":"paragraph"},{"syntax":null,"code":["FV = PV × (1 + r)^n"],"type":"codeListing"},{"anchor":"Annuity-Regular-Savings","type":"heading","level":3,"text":"Annuity (Regular Savings)"},{"syntax":"swift","code":["\/\/ Saving $500\/month for 30 years at 7% annual return (401k scenario)","let retirement = futureValueAnnuity(","    payment: 500,","    rate: 0.07 \/ 12,","    periods: 360,","    type: .ordinary",")","\/\/ Result: ~609,985 (only deposited $180,000!)","","\/\/ With employer match (effectively $1,000\/month)","let withMatch = futureValueAnnuity(","    payment: 1_000,","    rate: 0.07 \/ 12,","    periods: 360,","    type: .ordinary",")","\/\/ Result: ~1,19,971 (over $1 million!)"],"type":"codeListing"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Formula (Ordinary):"}]}],"type":"paragraph"},{"syntax":null,"code":["FV = PMT × [((1+r)^n - 1) \/ r]"],"type":"codeListing"},{"anchor":"Real-World-Applications","type":"heading","level":3,"text":"Real-World Applications"},{"inlineContent":[{"inlineContent":[{"type":"text","text":"College Savings:"}],"type":"strong"}],"type":"paragraph"},{"syntax":"swift","code":["\/\/ Save $300\/month for 18 years at 6% for child's education","let collegeFund = futureValueAnnuity(","    payment: 300,","    rate: 0.06 \/ 12,","    periods: 216,","    type: .ordinary",")","\/\/ Result: ~116,206 (deposited only $64,800)"],"type":"codeListing"},{"inlineContent":[{"inlineContent":[{"type":"text","text":"Comparing Savings Plans:"}],"type":"strong"}],"type":"paragraph"},{"syntax":"swift","code":["\/\/ Plan A: $10,000 lump sum today","let planA = futureValue(presentValue: 10_000, rate: 0.08, periods: 10)","\/\/ Result: ~21,589","","\/\/ Plan B: $1,000\/year for 10 years","let planB = futureValueAnnuity(payment: 1_000, rate: 0.08, periods: 10, type: .ordinary)","\/\/ Result: ~14,487","","\/\/ Plan A wins! (lump sum advantage)"],"type":"codeListing"},{"anchor":"Payment-Calculations","type":"heading","level":2,"text":"Payment Calculations"},{"inlineContent":[{"text":"Calculate loan payments and analyze amortization.","type":"text"}],"type":"paragraph"},{"anchor":"Loan-Payment","type":"heading","level":3,"text":"Loan Payment"},{"syntax":"swift","code":["\/\/ $300,000 mortgage, 30 years, 6% annual rate","let monthlyPayment = payment(","    presentValue: 300_000,","    rate: 0.06 \/ 12,","    periods: 360,","    futureValue: 0,","    type: .ordinary",")","\/\/ Result: ~1,799\/month","","\/\/ Total paid over life of loan","let totalPaid = monthlyPayment * 360","\/\/ Result: ~647,515 (more than double the principal!)"],"type":"codeListing"},{"inlineContent":[{"inlineContent":[{"text":"Formula:","type":"text"}],"type":"strong"}],"type":"paragraph"},{"syntax":null,"code":["PMT = [PV × r(1+r)^n - FV × r] \/ [(1+r)^n - 1]","","For standard loan (FV = 0):","PMT = PV × [r(1+r)^n] \/ [(1+r)^n - 1]"],"type":"codeListing"},{"anchor":"Principal-and-Interest-Breakdown","type":"heading","level":3,"text":"Principal and Interest Breakdown"},{"code":["let principal = 300_000.0","let rate = 0.06 \/ 12","let periods = 360","","\/\/ First payment breakdown","let firstInterest = interestPayment(","    rate: rate,","    period: 1,","    totalPeriods: periods,","    presentValue: principal,","    futureValue: 0,","    type: .ordinary",")","\/\/ Result: ~1,500 (mostly interest!)","","let firstPrincipal = principalPayment(","    rate: rate,","    period: 1,","    totalPeriods: periods,","    presentValue: principal,","    futureValue: 0,","    type: .ordinary",")","\/\/ Result: ~299 (only 17% goes to principal)","","\/\/ Last payment breakdown","let lastInterest = interestPayment(","    rate: rate,","    period: 360,","    totalPeriods: periods,","    presentValue: principal,","    futureValue: 0,","    type: .ordinary",")","\/\/ Result: ~9 (almost all principal now)","","let lastPrincipal = principalPayment(","    rate: rate,","    period: 360,","    totalPeriods: periods,","    presentValue: principal,","    futureValue: 0,","    type: .ordinary",")","\/\/ Result: ~1,790 (99% goes to principal)"],"type":"codeListing","syntax":"swift"},{"text":"Cumulative Calculations","anchor":"Cumulative-Calculations","type":"heading","level":3},{"code":["\/\/ Total interest paid in first year","let firstYearInterest = cumulativeInterest(","    rate: rate,","    startPeriod: 1,","    endPeriod: 12,","    totalPeriods: periods,","    presentValue: principal,","    futureValue: 0,","    type: .ordinary",")","\/\/ Result: ~17,900 (almost all interest in early years)","","\/\/ Total principal paid in first year","let firstYearPrincipal = cumulativePrincipal(","    rate: rate,","    startPeriod: 1,","    endPeriod: 12,","    totalPeriods: periods,","    presentValue: principal,","    futureValue: 0,","    type: .ordinary",")","\/\/ Result: ~3,684 (only paid down 1.2% of loan)"],"type":"codeListing","syntax":"swift"},{"text":"Net Present Value (NPV)","anchor":"Net-Present-Value-NPV","type":"heading","level":2},{"inlineContent":[{"text":"NPV discounts all cash flows to present value and sums them.","type":"text"}],"type":"paragraph"},{"text":"Basic NPV","anchor":"Basic-NPV","type":"heading","level":3},{"code":["\/\/ Initial investment, then returns","let cashFlows = [-100_000.0, 30_000, 40_000, 50_000, 60_000]","","let npv = npv(discountRate: 0.10, cashFlows: cashFlows)","\/\/ Result: ~38,877","","\/\/ Positive NPV → accept project","\/\/ Negative NPV → reject project","\/\/ NPV = 0 → breakeven"],"type":"codeListing","syntax":"swift"},{"inlineContent":[{"inlineContent":[{"type":"text","text":"Formula:"}],"type":"strong"}],"type":"paragraph"},{"code":["NPV = Σ [CF_t \/ (1+r)^t]","","Where:","- CF_t = cash flow at time t","- r = discount rate","- t = time period (0, 1, 2, ...)"],"type":"codeListing","syntax":null},{"text":"NPV with Time Series","anchor":"NPV-with-Time-Series","type":"heading","level":3},{"code":["let periods = [","    Period.year(2025),","    Period.year(2026),","    Period.year(2027)","]","let cashFlows: [Double] = [-100_000, 50_000, 80_000]","","let ts = TimeSeries(periods: periods, values: cashFlows)","let npvValue = npv(rate: 0.10, timeSeries: ts)","\/\/ Result: ~11,570"],"type":"codeListing","syntax":"swift"},{"text":"Excel-Compatible NPV","anchor":"Excel-Compatible-NPV","type":"heading","level":3},{"code":["\/\/ Excel treats first cash flow as period 1, not period 0","let futureCashFlows = [30_000.0, 40_000, 50_000, 60_000]","","let npvExcelResult = npvExcel(rate: 0.10, cashFlows: futureCashFlows)","\/\/ Result: ~138,877","","\/\/ Add initial investment separately","let totalNPV = -100_000 + npvExcelResult","\/\/ Result: ~38,877"],"type":"codeListing","syntax":"swift"},{"text":"Investment Metrics","anchor":"Investment-Metrics","type":"heading","level":3},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Profitability Index:","type":"text"}]}],"type":"paragraph"},{"code":["let pi = profitabilityIndex(rate: 0.10, cashFlows: cashFlows)","\/\/ Result: ~1.38","","\/\/ PI > 1.0 → accept project","\/\/ PI < 1.0 → reject project","\/\/ PI = 1.0 → breakeven"],"type":"codeListing","syntax":"swift"},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Payback Periods:","type":"text"}]}],"type":"paragraph"},{"code":["\/\/ Simple payback (ignoring time value)","let payback = paybackPeriod(cashFlows: cashFlows)","\/\/ Result: 3 periods (recovered after 3rd payment)","","\/\/ Discounted payback (considering time value)","let discountedPayback = discountedPaybackPeriod(rate: 0.10, cashFlows: cashFlows)","\/\/ Result: 4 periods (takes longer with discounting)","","\/\/ nil means never recovers initial investment"],"type":"codeListing","syntax":"swift"},{"text":"Internal Rate of Return (IRR)","anchor":"Internal-Rate-of-Return-IRR","type":"heading","level":2},{"inlineContent":[{"type":"text","text":"IRR finds the discount rate where NPV = 0."}],"type":"paragraph"},{"text":"Basic IRR","anchor":"Basic-IRR","type":"heading","level":3},{"code":["let cashFlows = [-100_000.0, 30_000, 40_000, 50_000, 60_000]","","let irr = try irr(cashFlows: cashFlows)","\/\/ Result: ~24.9%","","\/\/ Compare to required rate of return:","\/\/ IRR > required return → accept project","\/\/ IRR < required return → reject project"],"type":"codeListing","syntax":"swift"},{"inlineContent":[{"inlineContent":[{"type":"text","text":"Relationship to NPV:"}],"type":"strong"}],"type":"paragraph"},{"code":["\/\/ Verify: NPV at IRR should be ~0","let npvAtIRR = npv(discountRate: irr, cashFlows: cashFlows)","\/\/ Result: ~0.0000001 (essentially zero within tolerance)"],"type":"codeListing","syntax":"swift"},{"text":"Modified IRR (MIRR)","anchor":"Modified-IRR-MIRR","type":"heading","level":3},{"inlineContent":[{"text":"MIRR separates financing and reinvestment rates:","type":"text"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["\/\/ Finance negative flows at 8%, reinvest positive flows at 12%","let mirr = try mirr(","    cashFlows: cashFlows,","    financeRate: 0.08,","    reinvestmentRate: 0.12",")","\/\/ Result: ~20.1%","","\/\/ MIRR is more realistic than IRR for projects with","\/\/ multiple sign changes or different borrowing\/investing rates"]},{"type":"heading","anchor":"Error-Handling","text":"Error Handling","level":3},{"type":"codeListing","syntax":"swift","code":["do {","    \/\/ All positive cash flows → no IRR","    let allPositive = [100.0, 200.0, 300.0]","    let irrValue = try irr(cashFlows: allPositive)","} catch IRRError.invalidCashFlows {","    print(\"Need both positive and negative cash flows\")","}","","do {","    \/\/ Convergence failure","    let problematic = [-100.0, 10.0, -50.0, 200.0]","    let irrValue = try irr(cashFlows: problematic, maxIterations: 10)","} catch IRRError.convergenceFailed {","    print(\"IRR calculation did not converge\")","}"]},{"type":"heading","anchor":"Irregular-Cash-Flows-XNPVXIRR","text":"Irregular Cash Flows (XNPV\/XIRR)","level":2},{"type":"paragraph","inlineContent":[{"text":"Real-world cash flows rarely occur at regular intervals. XNPV and XIRR handle irregular timing.","type":"text"}]},{"type":"heading","anchor":"XNPV","text":"XNPV","level":3},{"type":"codeListing","syntax":"swift","code":["\/\/ Investment with irregular cash flows","let dates = [","    Date(),  \/\/ Today: initial investment","    Date(timeIntervalSinceNow: 100 * 86400),   \/\/ 100 days later","    Date(timeIntervalSinceNow: 250 * 86400),   \/\/ 250 days later","    Date(timeIntervalSinceNow: 400 * 86400)    \/\/ 400 days later","]","let cashFlows = [-100_000.0, 30_000, 50_000, 40_000]","","let xnpvValue = try xnpv(rate: 0.10, dates: dates, cashFlows: cashFlows)","\/\/ Result: ~12,100 (accounts for actual timing)","","\/\/ Compare to regular NPV (assumes annual periods)","let regularNPV = npv(discountRate: 0.10, cashFlows: cashFlows)","\/\/ Result: ~$(1,352) (different due to timing assumptions)"]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Formula:","type":"text"}],"type":"strong"}]},{"type":"codeListing","syntax":null,"code":["XNPV = Σ [CF_i \/ (1+r)^((date_i - date_0) \/ 365)]","","Where:","- CF_i = cash flow i","- date_i = date of cash flow i","- date_0 = date of first cash flow","- r = annual discount rate"]},{"type":"heading","anchor":"XIRR","text":"XIRR","level":3},{"type":"codeListing","syntax":"swift","code":["\/\/ Find IRR for irregular cash flows","let xirrValue = try xirr(dates: dates, cashFlows: cashFlows)","\/\/ Result: ~29.4%","","\/\/ Verify: XNPV at XIRR should be ~0","let xnpvAtXIRR = try xnpv(rate: xirrValue, dates: dates, cashFlows: cashFlows)","\/\/ Result: ~0.0000001"]},{"type":"heading","anchor":"Real-World-Application-Venture-Capital","text":"Real-World Application: Venture Capital","level":3},{"type":"codeListing","syntax":"swift","code":["\/\/ VC investment with multiple rounds and exit","let vcDates = [","    Date(),  \/\/ Series A","    Date(timeIntervalSinceNow: 365 * 86400),    \/\/ Series B (1 year)","    Date(timeIntervalSinceNow: 750 * 86400),    \/\/ Series C (2+ years)","    Date(timeIntervalSinceNow: 1825 * 86400)    \/\/ Exit (5 years)","]","let vcCashFlows = [-5_000_000.0, -3_000_000, -2_000_000, 40_000_000]","","let vcXIRR = try xirr(dates: vcDates, cashFlows: vcCashFlows)","\/\/ Result: ~37.1% (excellent return)","","let vcXNPV = try xnpv(rate: 0.20, dates: vcDates, cashFlows: vcCashFlows)","\/\/ NPV at 20% hurdle rate"]},{"type":"heading","anchor":"Choosing-the-Right-Function","text":"Choosing the Right Function","level":2},{"type":"heading","anchor":"Decision-Guide","text":"Decision Guide","level":3},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Single Amount:"}]}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Use "},{"type":"codeVoice","code":"presentValue(futureValue:rate:periods:)"},{"type":"text","text":" to discount future value to today"}]}]},{"content":[{"inlineContent":[{"text":"Use ","type":"text"},{"code":"futureValue(presentValue:rate:periods:)","type":"codeVoice"},{"text":" to project current value to future","type":"text"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Regular Payments:","type":"text"}]}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Use ","type":"text"},{"type":"codeVoice","code":"presentValueAnnuity(payment:rate:periods:type:)"},{"text":" for loan valuation","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Use ","type":"text"},{"code":"futureValueAnnuity(payment:rate:periods:type:)","type":"codeVoice"},{"text":" for savings projections","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Use "},{"type":"codeVoice","code":"payment(presentValue:rate:periods:futureValue:type:)"},{"type":"text","text":" for loan payments"}]}]}]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Investment Analysis (Regular Periods):"}],"type":"strong"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Use ","type":"text"},{"code":"npv(discountRate:cashFlows:)","type":"codeVoice"},{"text":" for project valuation","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Use "},{"type":"codeVoice","code":"irr(cashFlows:guess:tolerance:maxIterations:)"},{"type":"text","text":" for return calculation"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Use ","type":"text"},{"code":"mirr(cashFlows:financeRate:reinvestmentRate:)","type":"codeVoice"},{"text":" for more realistic returns","type":"text"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Investment Analysis (Irregular Periods):"}]}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Use "},{"type":"codeVoice","code":"xnpv(rate:dates:cashFlows:)"},{"type":"text","text":" for irregular cash flow valuation"}]}]},{"content":[{"inlineContent":[{"text":"Use ","type":"text"},{"type":"codeVoice","code":"xirr(dates:cashFlows:guess:tolerance:maxIterations:)"},{"text":" for irregular return calculation","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"inlineContent":[{"inlineContent":[{"text":"Loan Analysis:","type":"text"}],"type":"strong"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"text":"Use ","type":"text"},{"type":"codeVoice","code":"principalPayment(rate:period:totalPeriods:presentValue:futureValue:type:)"},{"text":" for amortization","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Use "},{"code":"interestPayment(rate:period:totalPeriods:presentValue:futureValue:type:)","type":"codeVoice"},{"type":"text","text":" for interest tracking"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Use "},{"type":"codeVoice","code":"cumulativeInterest(rate:startPeriod:endPeriod:totalPeriods:presentValue:futureValue:type:)"},{"type":"text","text":" for tax calculations"}]}]}],"type":"unorderedList"},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Quick Screening:","type":"text"}]}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Use "},{"type":"codeVoice","code":"profitabilityIndex(rate:cashFlows:)"},{"type":"text","text":" to rank projects"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Use ","type":"text"},{"code":"paybackPeriod(cashFlows:)","type":"codeVoice"},{"text":" for simple risk assessment","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Use "},{"code":"discountedPaybackPeriod(rate:cashFlows:)","type":"codeVoice"},{"type":"text","text":" for risk-adjusted assessment"}]}]}],"type":"unorderedList"},{"type":"heading","anchor":"Best-Practices","text":"Best Practices","level":2},{"type":"heading","anchor":"Use-Appropriate-Rates","text":"Use Appropriate Rates","level":3},{"type":"codeListing","code":["\/\/ Convert annual rates to period rates","let annualRate = 0.06","let monthlyRate = annualRate \/ 12      \/\/ 0.005","let quarterlyRate = annualRate \/ 4     \/\/ 0.015","","\/\/ For monthly payments, use monthly rate","let monthlyPmt = payment(presentValue: 100_000, rate: monthlyRate, periods: 360)"],"syntax":"swift"},{"type":"heading","anchor":"Consider-Payment-Timing","text":"Consider Payment Timing","level":3},{"type":"codeListing","code":["\/\/ Ordinary annuity: payments at END of period (most common)","\/\/ - Mortgage payments","\/\/ - Bond coupons","\/\/ - Loan payments","","\/\/ Annuity due: payments at BEGINNING of period","\/\/ - Rent payments","\/\/ - Lease payments","\/\/ - Insurance premiums"],"syntax":"swift"},{"type":"heading","anchor":"Validate-Inputs","text":"Validate Inputs","level":3},{"type":"codeListing","code":["\/\/ Check for sensible ranges","guard rate > -1.0 && rate < 10.0 else {","    \/\/ Rate should be between -100% and 1000%","    throw ValidationError.unreasonableRate","}","","\/\/ Ensure cash flows have sign changes for IRR","let hasPositive = cashFlows.contains { $0 > 0 }","let hasNegative = cashFlows.contains { $0 < 0 }","guard hasPositive && hasNegative else {","    \/\/ IRR requires both positive and negative cash flows","    throw ValidationError.invalidCashFlows","}"],"syntax":"swift"},{"type":"heading","anchor":"Use-Realistic-Assumptions","text":"Use Realistic Assumptions","level":3},{"type":"codeListing","code":["\/\/ Stock market historical returns: ~10% nominal, ~7% real","let stockReturn = 0.07","","\/\/ Bond returns: ~4-5%","let bondReturn = 0.045","","\/\/ Risk-free rate (Treasury): ~2-3%","let riskFreeRate = 0.025","","\/\/ Inflation: ~2-3% long-term","let inflation = 0.025","","\/\/ Discount rates for projects","let lowRisk = 0.08    \/\/ Established business","let mediumRisk = 0.12  \/\/ Growth company","let highRisk = 0.20   \/\/ Startup\/venture"],"syntax":"swift"}]}],"references":{"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/GettingStarted":{"kind":"article","role":"article","title":"Getting Started with BusinessMath","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/GettingStarted","abstract":[{"type":"text","text":"Learn how to use BusinessMath for business calculations and financial modeling."}],"url":"\/documentation\/businessmath\/gettingstarted","type":"topic"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/TimeSeries":{"identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/TimeSeries","type":"topic","title":"Time Series Analysis","kind":"article","url":"\/documentation\/businessmath\/timeseries","abstract":[{"type":"text","text":"Work with temporal data using periods and time series containers."}],"role":"article"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/GrowthModeling":{"abstract":[{"type":"text","text":"Analyze trends, model growth patterns, and forecast future values."}],"url":"\/documentation\/businessmath\/growthmodeling","role":"article","kind":"article","title":"Growth Modeling and Forecasting","type":"topic","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/GrowthModeling"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/LoanAmortization":{"kind":"article","role":"article","title":"Loan Amortization Analysis","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/LoanAmortization","abstract":[{"type":"text","text":"Build a complete loan amortization schedule and analyze payment breakdowns."}],"url":"\/documentation\/businessmath\/loanamortization","type":"topic"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath":{"identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath","type":"topic","title":"BusinessMath","url":"\/documentation\/businessmath","kind":"article","abstract":[{"text":"A comprehensive Swift library for business mathematics, time series analysis, and financial modeling.","type":"text"}],"role":"collection"},"doc://com.jpurnell.BusinessMath/documentation/BusinessMath/InvestmentAnalysis":{"abstract":[{"type":"text","text":"Evaluate investment opportunities using NPV, IRR, and other financial metrics."}],"url":"\/documentation\/businessmath\/investmentanalysis","role":"article","kind":"article","title":"Investment Analysis","type":"topic","identifier":"doc:\/\/com.jpurnell.BusinessMath\/documentation\/BusinessMath\/InvestmentAnalysis"}}}